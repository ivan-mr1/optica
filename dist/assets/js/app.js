var B=Object.defineProperty;var P=o=>{throw TypeError(o)};var F=(o,s,e)=>s in o?B(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e;var a=(o,s,e)=>F(o,typeof s!="symbol"?s+"":s,e),H=(o,s,e)=>s.has(o)||P("Cannot "+e);var h=(o,s,e)=>s.has(o)?P("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(o):s.set(o,e);var c=(o,s,e)=>(H(o,s,"access private method"),e);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&t(n)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();function I(){const o=document.querySelectorAll("[data-goto]");o.length>0&&o.forEach(s=>{s.addEventListener("click",e=>{var i;const t=e.target.closest("[data-goto]");if(t.dataset.goto&&document.querySelector(t.dataset.goto)){e.preventDefault();const n=document.querySelector(t.dataset.goto).getBoundingClientRect().top+window.pageYOffset-(((i=document.querySelector("header"))==null?void 0:i.offsetHeight)||0);window.scrollTo({top:n,behavior:"smooth"})}})})}function Y(){window.addEventListener("scroll",function(){scrollY>0?document.querySelector(".header").classList.add("scroll"):document.querySelector(".header").classList.remove("scroll")})}class D{constructor(){a(this,"selectors",{root:"[data-header]",menu:"[data-header-menu]",burgerButton:"[data-header-burger-btn]",overlay:".header__overlay"});a(this,"stateClasses",{isActive:"is-active",isLock:"lock"});a(this,"setHeightProperty",()=>{const s=this.rootElement.offsetHeight;document.documentElement.style.setProperty("--header-height",`${s}px`)});a(this,"toggleMenu",()=>{this.menuElement.classList.contains(this.stateClasses.isActive)?this.closeMenu():this.openMenu()});a(this,"onEscapePress",s=>{s.key==="Escape"&&this.closeMenu()});a(this,"onOverlayClick",s=>{s.target===this.overlayElement&&this.closeMenu()});a(this,"onMenuClick",s=>{const e=s.target;(e.closest("a")||e.closest("button"))&&this.closeMenu()});this.rootElement=document.querySelector(this.selectors.root),this.rootElement&&(this.menuElement=this.rootElement.querySelector(this.selectors.menu),this.burgerButtonElement=this.rootElement.querySelector(this.selectors.burgerButton),this.overlayElement=this.rootElement.querySelector(this.selectors.overlay),this.bindEvents(),this.setHeightProperty())}updateAccessibility(s){this.burgerButtonElement.setAttribute("aria-expanded",s),document.body.classList.toggle(this.stateClasses.isLock,s)}openMenu(){this.burgerButtonElement.classList.add(this.stateClasses.isActive),this.menuElement.classList.add(this.stateClasses.isActive),this.updateAccessibility(!0),document.addEventListener("keydown",this.onEscapePress)}closeMenu(){this.burgerButtonElement.classList.remove(this.stateClasses.isActive),this.menuElement.classList.remove(this.stateClasses.isActive),this.updateAccessibility(!1),document.removeEventListener("keydown",this.onEscapePress)}bindEvents(){!this.burgerButtonElement||!this.menuElement||(this.burgerButtonElement.addEventListener("click",this.toggleMenu),this.menuElement.addEventListener("click",this.onMenuClick),window.addEventListener("resize",this.setHeightProperty),this.overlayElement&&this.overlayElement.addEventListener("click",this.onOverlayClick))}destroy(){this.burgerButtonElement.removeEventListener("click",this.toggleMenu),this.menuElement.removeEventListener("click",this.onMenuClick),document.removeEventListener("keydown",this.onEscapePress),window.removeEventListener("resize",this.setHeightProperty)}}class R{constructor(s={}){a(this,"defaults",{parent:document.body,offset:300,maxWidth:2e3,scrollUpClass:"scroll-up",scrollUpPathClass:"scroll-up__path"});a(this,"toggleVisibility",()=>{const{offset:s,maxWidth:e,scrollUpClass:t}=this.settings,i=this.getScrollTop(),r=window.innerWidth;this.updateDashOffset(),i>s&&r<=e?this.button.classList.add(`${t}--active`):this.button.classList.remove(`${t}--active`)});a(this,"scrollToTop",()=>{window.scrollTo({top:0,behavior:"smooth"})});this.settings={...this.defaults,...s};const{parent:e}=this.settings;if(!(e instanceof Element)){console.error("ScrollUpButton = Invalid parent element");return}this.parent=e,this.button=null,this.path=null,this.pathLength=0,this.init()}init(){this.createButton(),this.cacheElements(),this.setInitialStyles(),this.bindEvents(),this.toggleVisibility()}createButton(){const{scrollUpClass:s,scrollUpPathClass:e,parent:t}=this.settings;this.button=document.createElement("button"),this.button.classList.add(s),this.button.setAttribute("aria-label","scroll to top"),this.button.setAttribute("title","scroll to top"),this.button.innerHTML=`
      <svg class="${s}__svg" xmlns="http://www.w3.org/2000/svg" viewBox="-2 -2 52 52">
        <path class="${e}" d="M 24,0 a24,24 0 0,1 0,48 a24,24 0 0,1 0,-48" />
      </svg>
    `,t.appendChild(this.button)}cacheElements(){const{scrollUpPathClass:s}=this.settings;this.path=this.button.querySelector(`.${s}`),this.pathLength=this.path.getTotalLength()}setInitialStyles(){this.path.style.strokeDasharray=`${this.pathLength} ${this.pathLength}`,this.path.style.transition="stroke-dashoffset 0.3s ease"}getScrollTop(){return window.scrollY||document.documentElement.scrollTop}updateDashOffset(){const s=document.documentElement.scrollHeight-window.innerHeight,e=this.pathLength-this.getScrollTop()*this.pathLength/s;this.path.style.strokeDashoffset=e}bindEvents(){window.addEventListener("scroll",this.toggleVisibility),window.addEventListener("resize",this.toggleVisibility),this.button.addEventListener("click",this.scrollToTop)}destroy(){window.removeEventListener("scroll",this.toggleVisibility),window.removeEventListener("resize",this.toggleVisibility),this.button.removeEventListener("click",this.scrollToTop),this.button.remove()}}function K(){const o=document.querySelectorAll(".scroller");window.matchMedia("(prefer-reduce-motion: reduce)").matches||s();function s(){o.forEach(e=>{e.setAttribute("data-animated",!0);const t=e.querySelector(".scroller__inner");Array.from(t.children).forEach(r=>{const n=r.cloneNode(!0);n.setAttribute("aria-hidden",!0),t.appendChild(n)})})}}let f=!0;const A=o=>{f=!1,setTimeout(()=>{f=!0},o)},W=()=>document.querySelectorAll("[data-right-padding]"),z=()=>(window.innerWidth-document.body.clientWidth)/16+"rem",T=(o="")=>{W().forEach(e=>{e.style.paddingRight=o}),document.body.style.paddingRight=o},G=o=>{document.documentElement.style.setProperty("--scrollbar-width",o)},j=()=>{document.documentElement.style.removeProperty("--scrollbar-width")},Q=(o=500)=>{if(!f)return;const s=z();T(s),G(s),document.documentElement.setAttribute("data-scroll-lock",""),A(o)},Z=(o=500)=>{f&&(setTimeout(()=>{T(""),j(),document.documentElement.removeAttribute("data-scroll-lock")},o),A(o))};class J{constructor(s={}){a(this,"selectors",{youtubePlace:"[data-popup-youtube-place]"});const e={youtubeAttr:"data-popup-youtube",autoplayYoutube:!0};this.options={...e,...s}}extractCodeFromButton(s){return(s==null?void 0:s.getAttribute(this.options.youtubeAttr))||null}extractCodeFromPopup(s){return(s==null?void 0:s.getAttribute(this.options.youtubeAttr))||null}setup(s,e){if(!s||!e)return;let t=s.querySelector("iframe");if(!t){t=document.createElement("iframe"),t.allowFullscreen=!0,t.allow=this.options.autoplayYoutube?"autoplay; encrypted-media":"encrypted-media";const i=s.querySelector(this.selectors.youtubePlace);if(!i)return;i.appendChild(t)}t.style.display="",t.src=`https://www.youtube.com/embed/${e}?rel=0&showinfo=0${this.options.autoplayYoutube?"&autoplay=1":""}`}clear(s){if(!s)return;const e=s.querySelector("iframe");e&&(e.style.display="none",e.src="")}}class X{constructor(s={}){a(this,"selectors",{root:"[data-popup]",openButton:"[data-popup-link]",closeButton:"[data-popup-close]",content:"[data-popup-body]"});a(this,"stateAttrs",{popupActive:"data-popup-active",bodyActive:"data-popup-open"});a(this,"stateClasses",{isVisible:"is-visible"});const e={youtubeAttr:"data-popup-youtube",autoplayYoutube:!0,focusCatch:!0,closeEsc:!0,bodyLock:!0,hash:{use:!0,navigate:!0}};this.options={...e,...s,hash:{...e.hash,...s==null?void 0:s.hash}},this.youtube=new J({youtubeAttr:this.options.youtubeAttr,autoplayYoutube:this.options.autoplayYoutube}),this.isOpen=!1,this.activePopup=null,this.lastFocusEl=null,this.youTubeCode=null,this._focusable=["a[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"button:not([disabled]):not([aria-hidden])","select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])",'[tabindex]:not([tabindex^="-"])'],this.bindEvents(),this.options.hash.navigate&&window.location.hash&&this.openFromHash()}bindEvents(){document.addEventListener("click",this.handleClick.bind(this)),document.addEventListener("keydown",this.handleKey.bind(this)),this.options.hash.navigate&&window.addEventListener("hashchange",this.handleHashChange.bind(this))}handleClick(s){const e=s.target.closest(this.selectors.openButton),t=s.target.closest(this.selectors.closeButton);if(e){s.preventDefault(),this.youTubeCode=this.youtube.extractCodeFromButton(e),this.lastFocusEl=e;const i=e.getAttribute("data-popup-link");this.open(i);return}(t||this.isOpen&&!s.target.closest(this.selectors.content))&&(s.preventDefault(),this.close())}handleKey(s){this.isOpen&&(this.options.closeEsc&&s.key==="Escape"?(s.preventDefault(),this.close()):this.options.focusCatch&&s.key==="Tab"&&this.focusCatch(s))}handleHashChange(){window.location.hash?this.openFromHash():this.close()}open(s){if(!f)return;const e=document.querySelector(`[data-popup="${s}"]`)??document.querySelector(this.selectors.root);if(!e)return;this.activePopup&&this.activePopup!==e&&this.close(this.activePopup),this.activePopup=e,this.isOpen=!0;const t=this.youTubeCode||this.youtube.extractCodeFromPopup(e);t&&this.youtube.setup(e,t),this.options.hash.use&&this.updateHash(s),e.setAttribute(this.stateAttrs.popupActive,""),e.classList.add(this.stateClasses.isVisible),e.setAttribute("aria-hidden","false"),document.documentElement.setAttribute(this.stateAttrs.bodyActive,""),this.options.bodyLock&&Q(),setTimeout(()=>this.focusTrap(),50)}close(s=this.activePopup){var e;!s||!this.isOpen||(s.removeAttribute(this.stateAttrs.popupActive),s.classList.remove(this.stateClasses.isVisible),s.setAttribute("aria-hidden","true"),this.isOpen=!1,this.activePopup=null,this.youtube.clear(s),document.documentElement.removeAttribute(this.stateAttrs.bodyActive),this.options.bodyLock&&Z(),this.options.hash.use&&this.clearHash(),(e=this.lastFocusEl)==null||e.focus())}focusCatch(s){var r;const e=(r=this.activePopup)==null?void 0:r.querySelectorAll(this._focusable);if(!(e!=null&&e.length))return;const t=Array.from(e),i=t.indexOf(document.activeElement);s.shiftKey&&i===0?(t.at(-1).focus(),s.preventDefault()):!s.shiftKey&&i===t.length-1&&(t[0].focus(),s.preventDefault())}focusTrap(){var e,t;const s=(e=this.activePopup)==null?void 0:e.querySelectorAll(this._focusable);s!=null&&s.length&&((t=this.isOpen?s[0]:this.lastFocusEl)==null||t.focus())}updateHash(s){history.replaceState(null,"",`#${s}`)}clearHash(){history.replaceState(null,"",window.location.pathname)}openFromHash(){const s=window.location.hash.replace("#","");if(!s)return;const e=document.querySelector(`[data-popup-link="${s}"]`);this.youTubeCode=this.youtube.extractCodeFromButton(e),this.open(s)}}const y=JSON.parse('[{"category":"glasses for vision","id":1,"image":"assets/img/products/glasses-for-vision/1.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-1","price":1200},{"category":"glasses for vision","id":2,"image":"assets/img/products/glasses-for-vision/2.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-2","price":1200},{"category":"glasses for vision","id":3,"image":"assets/img/products/glasses-for-vision/3.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-3","price":1200},{"category":"glasses for vision","id":4,"image":"assets/img/products/glasses-for-vision/4.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-4","price":1200},{"category":"glasses for vision","id":5,"image":"assets/img/products/glasses-for-vision/5.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-5","price":1200},{"category":"glasses for vision","id":6,"image":"assets/img/products/glasses-for-vision/6.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-6","price":1200},{"category":"glasses for vision","id":7,"image":"assets/img/products/glasses-for-vision/7.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-7","price":1200},{"category":"glasses for vision","id":8,"image":"assets/img/products/glasses-for-vision/8.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-8","price":1200},{"category":"glasses for vision","id":9,"image":"assets/img/products/glasses-for-vision/9.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-9","price":1200},{"category":"glasses for vision","id":10,"image":"assets/img/products/glasses-for-vision/10.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-10","price":1200},{"category":"glasses for vision","id":11,"image":"assets/img/products/glasses-for-vision/11.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-11","price":1200},{"category":"glasses for vision","id":12,"image":"assets/img/products/glasses-for-vision/12.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-12","price":1200},{"category":"glasses for vision","id":13,"image":"assets/img/products/glasses-for-vision/13.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-13","price":1200},{"category":"glasses for vision","id":14,"image":"assets/img/products/glasses-for-vision/14.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-14","price":1200},{"category":"glasses for vision","id":15,"image":"assets/img/products/glasses-for-vision/15.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-15","price":1200},{"category":"glasses for vision","id":16,"image":"assets/img/products/glasses-for-vision/16.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-16","price":1200},{"category":"glasses for vision","id":17,"image":"assets/img/products/glasses-for-vision/17.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-17","price":1200},{"category":"glasses for vision","id":18,"image":"assets/img/products/glasses-for-vision/18.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-18","price":1200},{"category":"glasses for vision","id":19,"image":"assets/img/products/glasses-for-vision/19.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-19","price":1200},{"category":"glasses for vision","id":20,"image":"assets/img/products/glasses-for-vision/20.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-20","price":1200},{"category":"glasses for vision","id":21,"image":"assets/img/products/glasses-for-vision/21.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-21","price":1200},{"category":"glasses for vision","id":22,"image":"assets/img/products/glasses-for-vision/22.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-22","price":1200},{"category":"glasses for vision","id":23,"image":"assets/img/products/glasses-for-vision/23.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-23","price":1200},{"category":"glasses for vision","id":24,"image":"assets/img/products/glasses-for-vision/24.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-24","price":1200},{"category":"glasses for vision","id":25,"image":"assets/img/products/glasses-for-vision/25.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-25","price":1200},{"category":"glasses for vision","id":26,"image":"assets/img/products/glasses-for-vision/26.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-26","price":1200},{"category":"glasses for vision","id":27,"image":"assets/img/products/glasses-for-vision/27.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-27","price":1200},{"category":"glasses for vision","id":28,"image":"assets/img/products/glasses-for-vision/28.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-28","price":1200},{"category":"glasses for vision","id":29,"image":"assets/img/products/glasses-for-vision/29.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-29","price":1200},{"category":"glasses for vision","id":30,"image":"assets/img/products/glasses-for-vision/30.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-30","price":1200},{"category":"glasses for vision","id":31,"image":"assets/img/products/glasses-for-vision/31.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-31","price":1200},{"category":"glasses for vision","id":32,"image":"assets/img/products/glasses-for-vision/32.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-32","price":1200},{"category":"glasses for vision","id":33,"image":"assets/img/products/glasses-for-vision/33.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-33","price":1200},{"category":"glasses for vision","id":34,"image":"assets/img/products/glasses-for-vision/34.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-34","price":1200},{"category":"glasses for vision","id":35,"image":"assets/img/products/glasses-for-vision/35.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-35","price":1200},{"category":"glasses for vision","id":36,"image":"assets/img/products/glasses-for-vision/36.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-36","price":1200},{"category":"glasses for vision","id":37,"image":"assets/img/products/glasses-for-vision/37.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-37","price":1200},{"category":"glasses for vision","id":38,"image":"assets/img/products/glasses-for-vision/38.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-38","price":1200},{"category":"glasses for vision","id":39,"image":"assets/img/products/glasses-for-vision/39.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-39","price":1200},{"category":"glasses for vision","id":40,"image":"assets/img/products/glasses-for-vision/40.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-40","price":1200},{"category":"glasses for vision","id":41,"image":"assets/img/products/glasses-for-vision/41.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-41","price":1200},{"category":"glasses for vision","id":42,"image":"assets/img/products/glasses-for-vision/42.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-42","price":1200},{"category":"glasses for vision","id":43,"image":"assets/img/products/glasses-for-vision/43.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-43","price":1200},{"category":"glasses for vision","id":44,"image":"assets/img/products/glasses-for-vision/44.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-44","price":1200},{"category":"glasses for vision","id":45,"image":"assets/img/products/glasses-for-vision/45.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-45","price":1200},{"category":"glasses for vision","id":46,"image":"assets/img/products/glasses-for-vision/46.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-46","price":1200},{"category":"glasses for vision","id":47,"image":"assets/img/products/glasses-for-vision/47.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-47","price":1200},{"category":"glasses for vision","id":48,"image":"assets/img/products/glasses-for-vision/48.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-48","price":1200},{"category":"glasses for vision","id":49,"image":"assets/img/products/glasses-for-vision/49.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-49","price":1200},{"category":"glasses for vision","id":50,"image":"assets/img/products/glasses-for-vision/50.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-50","price":1200},{"category":"glasses for vision","id":51,"image":"assets/img/products/glasses-for-vision/51.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-51","price":1200},{"category":"glasses for vision","id":52,"image":"assets/img/products/glasses-for-vision/52.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-52","price":1200},{"category":"glasses for vision","id":53,"image":"assets/img/products/glasses-for-vision/53.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-53","price":1200},{"category":"glasses for vision","id":54,"image":"assets/img/products/glasses-for-vision/54.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-54","price":1200},{"category":"glasses for vision","id":55,"image":"assets/img/products/glasses-for-vision/55.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-55","price":1200},{"category":"glasses for vision","id":56,"image":"assets/img/products/glasses-for-vision/56.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-56","price":1200},{"category":"glasses for vision","id":57,"image":"assets/img/products/glasses-for-vision/57.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-57","price":1200},{"category":"glasses for vision","id":58,"image":"assets/img/products/glasses-for-vision/58.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-58","price":1200},{"category":"glasses for vision","id":59,"image":"assets/img/products/glasses-for-vision/59.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-59","price":1200},{"category":"glasses for vision","id":60,"image":"assets/img/products/glasses-for-vision/60.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-60","price":1200},{"category":"glasses for vision","id":61,"image":"assets/img/products/glasses-for-vision/61.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-61","price":1200},{"category":"glasses for vision","id":62,"image":"assets/img/products/glasses-for-vision/62.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-62","price":1200},{"category":"glasses for vision","id":63,"image":"assets/img/products/glasses-for-vision/63.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-63","price":1200},{"category":"glasses for vision","id":64,"image":"assets/img/products/glasses-for-vision/64.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-64","price":1200},{"category":"glasses for vision","id":65,"image":"assets/img/products/glasses-for-vision/65.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-65","price":1200},{"category":"glasses for vision","id":66,"image":"assets/img/products/glasses-for-vision/66.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-66","price":1200},{"category":"glasses for vision","id":67,"image":"assets/img/products/glasses-for-vision/67.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-67","price":1200},{"category":"glasses for vision","id":68,"image":"assets/img/products/glasses-for-vision/68.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-68","price":1200},{"category":"glasses for vision","id":69,"image":"assets/img/products/glasses-for-vision/69.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-69","price":1200},{"category":"glasses for vision","id":70,"image":"assets/img/products/glasses-for-vision/70.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-70","price":1200},{"category":"glasses for vision","id":71,"image":"assets/img/products/glasses-for-vision/71.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-71","price":1200},{"category":"glasses for vision","id":72,"image":"assets/img/products/glasses-for-vision/72.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-72","price":1200},{"category":"glasses for vision","id":73,"image":"assets/img/products/glasses-for-vision/73.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-73","price":1200},{"category":"glasses for vision","id":74,"image":"assets/img/products/glasses-for-vision/74.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-74","price":1200},{"category":"glasses for vision","id":75,"image":"assets/img/products/glasses-for-vision/75.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-75","price":1200},{"category":"glasses for vision","id":76,"image":"assets/img/products/glasses-for-vision/76.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-76","price":1200},{"category":"glasses for vision","id":77,"image":"assets/img/products/glasses-for-vision/77.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-77","price":1200},{"category":"glasses for vision","id":78,"image":"assets/img/products/glasses-for-vision/78.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-78","price":1200},{"category":"glasses for vision","id":79,"image":"assets/img/products/glasses-for-vision/79.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-79","price":1200},{"category":"glasses for vision","id":80,"image":"assets/img/products/glasses-for-vision/80.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-80","price":1200},{"category":"glasses for vision","id":81,"image":"assets/img/products/glasses-for-vision/81.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-81","price":1200},{"category":"glasses for vision","id":82,"image":"assets/img/products/glasses-for-vision/82.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-82","price":1200},{"category":"glasses for vision","id":83,"image":"assets/img/products/glasses-for-vision/83.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-83","price":1200},{"category":"glasses for vision","id":84,"image":"assets/img/products/glasses-for-vision/84.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-84","price":1200},{"category":"glasses for vision","id":85,"image":"assets/img/products/glasses-for-vision/85.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-85","price":1200},{"category":"glasses for vision","id":86,"image":"assets/img/products/glasses-for-vision/86.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-86","price":1200},{"category":"glasses for vision","id":87,"image":"assets/img/products/glasses-for-vision/87.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-87","price":1200},{"category":"glasses for vision","id":88,"image":"assets/img/products/glasses-for-vision/88.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-88","price":1200},{"category":"glasses for vision","id":89,"image":"assets/img/products/glasses-for-vision/89.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-89","price":1200},{"category":"glasses for vision","id":90,"image":"assets/img/products/glasses-for-vision/90.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-90","price":1200},{"category":"glasses for vision","id":91,"image":"assets/img/products/glasses-for-vision/91.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-91","price":1200},{"category":"glasses for vision","id":92,"image":"assets/img/products/glasses-for-vision/92.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-92","price":1200},{"category":"glasses for vision","id":93,"image":"assets/img/products/glasses-for-vision/93.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-93","price":1200}]');var m,w;class E{constructor(s,e){h(this,m);this.STORAGE_KEY=s,this.EVENT_NAME=e,this.initTabSync()}initTabSync(){window.addEventListener("storage",s=>{s.key===this.STORAGE_KEY&&this.EVENT_NAME&&c(this,m,w).call(this)})}get(){try{const s=localStorage.getItem(this.STORAGE_KEY);return s?this.safeParse(s):[]}catch(s){return console.error("LocalStorage Get Error:",s),[]}}check(s){return this.get().includes(Number(s))}set(s=[]){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(s)),c(this,m,w).call(this)}catch(e){console.error(`Storage Error: Cannot save ${this.STORAGE_KEY}`,e)}}add(s){const e=this.get();e.push(Number(s)),this.set(e)}removeOne(s){const e=Number(s),t=this.get(),i=t.indexOf(e);i!==-1&&(t.splice(i,1),this.set(t))}remove(s){const e=Number(s),t=this.get().filter(i=>Number(i)!==e);this.set(t)}toggle(s){const e=Number(s),t=this.get(),i=t.indexOf(e);return i===-1?t.push(e):t.splice(i,1),this.set(t),t}clear(){localStorage.removeItem(this.STORAGE_KEY),c(this,m,w).call(this)}safeParse(s){try{const e=JSON.parse(s);return Array.isArray(e)?e:[]}catch{return[]}}}m=new WeakSet,w=function(){this.EVENT_NAME&&document.dispatchEvent(new CustomEvent(this.EVENT_NAME))};const C=new E("user_cart","cart:updated"),k=new E("user_favorites","favorite:updated");var d,L,x,M,$;class ss{constructor(s={}){h(this,d);a(this,"settings",{rootAttribute:"data-product",rootClass:"products__item"});a(this,"attributes",{buyBtn:"data-card-buy-btn",favorite:"data-card-favorite",price:"data-card-price"});a(this,"stateClasses",{active:"is-active",inCart:"is-in-cart"});this.product=s,this.element=null,this.subElements={},this.onFavoriteUpdate=this.syncFavoriteState.bind(this),this.onCartUpdate=this.syncCartState.bind(this)}getTemplate(){const{id:s,image:e,model:t,description:i,article:r,price:n}=this.product;return`
      <article class="product" data-product-id="${s}">
        <a href="/card.html?id=${s}" target="_blank" class="product__image ibg">
          <img src="${e}" alt="${t}" width="285" height="215" loading="lazy" />
        </a>
        <div class="product__bottom">
          <div class="product__actions">
            <button type="button" ${this.attributes.favorite} class="product__link product__link-favorite">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="21" fill="none"><path fill="currentColor" fill-rule="evenodd" d="M12 18.023c-4.64-2.635-7.236-5.26-8.493-7.55C2.224 8.138 2.33 6.156 3.052 4.74c1.478-2.9 5.684-3.828 8.242-.593l.705.893.707-.893c2.558-3.235 6.764-2.307 8.242.593.721 1.415.827 3.398-.456 5.735-1.257 2.289-3.852 4.914-8.492 7.549zm0-15.778C8.52-1.144 3.337.215 1.448 3.922.42 5.939.4 8.555 1.93 11.34c1.517 2.763 4.548 5.69 9.634 8.502l.436.24.435-.24c5.086-2.811 8.118-5.74 9.635-8.502 1.53-2.785 1.51-5.4.482-7.418C20.662.215 15.48-1.144 12 2.245" clip-rule="evenodd"/></svg>
            </button>
          </div>
          <a href="/card.html?id=${s}" target="_blank" class="product__title">${t}</a>
          <div class="product__descr"><p>${i}</p></div>
          <div class="product__article">Артикул: ${r}</div>
          <div class="product__price product-price">
            <div ${this.attributes.price} class="product__price-current">
              ${c(this,d,L).call(this,n)} грн
            </div>
          </div>
          <button type="button" ${this.attributes.buyBtn} class="button button--card product__btn">
            До кошика
          </button>
        </div>
      </article>
    `}render(){const s=document.createElement("div");return s.innerHTML=this.getTemplate(),this.element=document.createElement("li"),this.element.classList.add(this.settings.rootClass),this.element.setAttribute(this.settings.rootAttribute,this.product.id),this.element.append(s.firstElementChild),c(this,d,x).call(this),this.syncFavoriteState(),this.syncCartState(),c(this,d,M).call(this),this.element}syncFavoriteState(){var e;const s=k.check(this.product.id);(e=this.subElements.cardFavorite)==null||e.classList.toggle(this.stateClasses.active,s)}syncCartState(){const s=C.check(this.product.id);c(this,d,$).call(this,s)}updatePrice(s){this.product.price=s,this.subElements.cardPrice&&(this.subElements.cardPrice.textContent=`${c(this,d,L).call(this,s)} грн`)}destroy(){this.element&&(document.removeEventListener("favorite:updated",this.onFavoriteUpdate),document.removeEventListener("cart:updated",this.onCartUpdate),this.element.remove()),this.element=null,this.subElements={}}}d=new WeakSet,L=function(s){return new Intl.NumberFormat("uk-UA").format(s)},x=function(){this.element.querySelectorAll("[data-card-buy-btn], [data-card-favorite], [data-card-price]").forEach(e=>{const t=Object.keys(e.dataset)[0];this.subElements[t]=e})},M=function(){var s,e;(s=this.subElements.cardFavorite)==null||s.addEventListener("click",()=>{k.toggle(this.product.id)}),(e=this.subElements.cardBuyBtn)==null||e.addEventListener("click",()=>{C.check(this.product.id)||C.add(this.product.id)}),document.addEventListener("favorite:updated",this.onFavoriteUpdate),document.addEventListener("cart:updated",this.onCartUpdate)},$=function(s){const e=this.subElements.cardBuyBtn;e&&(e.textContent=s?"В кошику":"До кошика",e.classList.toggle(this.stateClasses.inCart,s))};class es{constructor(s,e=[]){this.container=document.querySelector(s),this.products=e,this.cards=[]}render(s=this.products){if(!this.container){console.warn("Container not found");return}if(this.clear(),s.length===0){this.container.innerHTML='<li class="products__empty">Товари не знайдено</li>';return}const e=document.createDocumentFragment();s.forEach(t=>{const i=new ss(t);this.cards.push(i),e.append(i.render())}),this.container.append(e)}updateProducts(s){this.products=s||[]}clear(){this.container&&(this.cards.forEach(s=>{typeof s.destroy=="function"&&s.destroy()}),this.container.innerHTML="",this.cards=[])}}var p,O,q,_,N;class ts{constructor(s,e=[]){h(this,p);a(this,"selectors",{pagination:"[data-pagination]",paginationList:"[data-pagination-list]",btnPrev:"[data-pagination-btn-prev]",btnNext:"[data-pagination-btn-next]",pageItem:".pagination__item"});a(this,"stateClasses",{active:"is-active",hidden:"is-hidden"});a(this,"state",{currentPage:1,productsPerPage:12});a(this,"onPageClick",s=>{const e=s.target.closest(this.selectors.pageItem);!e||e.classList.contains(this.stateClasses.active)||(this.state.currentPage=Number(e.dataset.page),this.render())});a(this,"onNextClick",()=>{this.state.currentPage<this.getPagesCount()&&(this.state.currentPage++,this.render())});a(this,"onPrevClick",()=>{this.state.currentPage>1&&(this.state.currentPage--,this.render())});this.renderList=s,this.products=e,this.pagination=document.querySelector(this.selectors.pagination),this.paginationList=document.querySelector(this.selectors.paginationList),this.btnPrev=document.querySelector(this.selectors.btnPrev),this.btnNext=document.querySelector(this.selectors.btnNext),this.paginationList&&(this.renderPagination(),this.render(),this.bindEvents())}getPagesCount(){return Math.ceil(this.products.length/this.state.productsPerPage)}render(){c(this,p,O).call(this),this.renderPagination(),c(this,p,N).call(this)}renderPagination(){var g,u;const s=this.getPagesCount();if(s<=1){(g=this.pagination)==null||g.classList.add(this.stateClasses.hidden);return}this.paginationList.innerHTML="";const e=document.createDocumentFragment(),{currentPage:t}=this.state,i=2,r=t-i,n=t+i;for(let l=1;l<=s;l++)l===1||l===s||l>=r&&l<=n?e.append(c(this,p,q).call(this,l)):l===r-1&&l>1?e.append(c(this,p,_).call(this)):l===n+1&&l<s&&e.append(c(this,p,_).call(this));this.paginationList.append(e),(u=this.pagination)==null||u.classList.remove(this.stateClasses.hidden)}bindEvents(){var s,e;this.paginationList.addEventListener("click",this.onPageClick),(s=this.btnNext)==null||s.addEventListener("click",this.onNextClick),(e=this.btnPrev)==null||e.addEventListener("click",this.onPrevClick)}updateProducts(s){this.products=s||[],this.state.currentPage=1,this.renderPagination(),this.render()}}p=new WeakSet,O=function(){const{currentPage:s,productsPerPage:e}=this.state,t=(s-1)*e,i=t+e,r=this.products.slice(t,i);if(this.renderList.render(r),s>1){const u=this.renderList.container.getBoundingClientRect().top+window.pageYOffset+-100;window.scrollTo({top:u,behavior:"smooth"})}},q=function(s){const e=document.createElement("li");return e.className="pagination__item",s===this.state.currentPage&&e.classList.add(this.stateClasses.active),e.dataset.page=s,e.textContent=s,e},_=function(){const s=document.createElement("li");return s.className="pagination__separator",s.textContent="...",s},N=function(){const s=this.getPagesCount();this.btnPrev&&(this.btnPrev.disabled=this.state.currentPage===1),this.btnNext&&(this.btnNext.disabled=this.state.currentPage===s)};class is{constructor(){a(this,"selectors",{root:"[data-favorite]",button:"[data-favorite-btn]",content:".favorite__content"});a(this,"stateClasses",{active:"is-active"});a(this,"handleToggle",s=>{s.preventDefault(),this.isOpen?this.close():this.open()});a(this,"handleClickOutside",s=>{this.root.contains(s.target)||this.close()});a(this,"handleEscClose",s=>{s.key==="Escape"&&this.close()});this.root=document.querySelector(this.selectors.root),this.root&&(this.button=this.root.querySelector(this.selectors.button),this.content=this.root.querySelector(this.selectors.content),this.init())}init(){this.button.addEventListener("click",this.handleToggle)}get isOpen(){return this.root.classList.contains(this.stateClasses.active)}open(){this.root.classList.add(this.stateClasses.active),this.button.setAttribute("aria-expanded","true"),document.addEventListener("click",this.handleClickOutside),document.addEventListener("keydown",this.handleEscClose),this.root.dispatchEvent(new CustomEvent("favorite:opened"))}close(){this.root.classList.remove(this.stateClasses.active),this.button.setAttribute("aria-expanded","false"),document.removeEventListener("click",this.handleClickOutside),document.removeEventListener("keydown",this.handleEscClose)}destroy(){this.close(),this.button.removeEventListener("click",this.handleToggle)}}var v,V;class os{constructor(s,e,t){h(this,v);a(this,"selectors",{list:"[data-favorite-list]",totalPrice:".favorite__fullprice"});this.storage=s,this.cartStorage=t,this.allProducts=e,this.element=document.querySelector(this.selectors.list),this.totalPriceElement=document.querySelector(this.selectors.totalPrice),this.formatter=new Intl.NumberFormat("uk-UA"),this.element&&this.init()}init(){this.render(),this.initEventListeners(),document.addEventListener("favorite:updated",()=>this.render())}render(){const s=this.storage.get(),e=this.allProducts.filter(i=>s.includes(Number(i.id)));if(e.length===0){this.element.innerHTML='<li class="favorite__empty">Ваш список порожній</li>',c(this,v,V).call(this,0);return}this.element.innerHTML=e.map(i=>this.template(i)).join("");const t=e.reduce((i,r)=>i+Number(r.price),0);c(this,v,V).call(this,t)}template(s){const{id:e,image:t,model:i,price:r,article:n}=s;return`
      <li class="favorite__item">
        <article class="favorite__product favorite-product" data-product-id="${e}">
          <a href="/card.html?id=${e}" target="_blank" class="favorite-product__image">
            <img src="${t}" alt="${i}" width="80" height="80" loading="lazy" />
          </a>
          <div class="favorite-product__wrapper">
            <a href="/card.html?id=${e}" target="_blank" class="favorite-product__title">${i}</a>
            <div class="favorite-product__inner">
              <div class="favorite-product__article">Art: ${n}</div>
              <div class="favorite-product__price">${this.formatter.format(r)} грн</div>
            </div>
          </div>
          <div class="favorite-product__buttons">
            <button data-favorite-remove-btn class="favorite-product__btn favorite-product__delete" title="Видалити">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                fill="none"
                viewBox="0 0 20 20"
              >
                <path
                  fill="#ffa501"
                  d="M18.572 2.857h-5v-.714C13.572.959 12.612 0 11.429 0H8.572C7.388 0 6.429.96 6.429 2.143v.714h-5a.714.714 0 1 0 0 1.429h.776L3.572 19.35c.033.369.343.65.714.649h11.428c.37.002.681-.28.715-.65l1.366-15.064h.776a.714.714 0 1 0 0-1.429M7.857 2.143c0-.395.32-.714.715-.714h2.857c.394 0 .714.32.714.714v.714H7.857zm7.205 16.428H4.938L3.643 4.286H16.36z"
                />
                <path
                  fill="#ffa501"
                  d="M7.857 16.381v-.003l-.714-10a.716.716 0 0 0-1.429.101l.715 10a.714.714 0 0 0 .714.664h.051a.714.714 0 0 0 .663-.762M10 5.714a.714.714 0 0 0-.714.715v10a.714.714 0 1 0 1.428 0v-10A.714.714 0 0 0 10 5.714M13.622 5.714a.716.716 0 0 0-.765.664l-.714 10a.714.714 0 0 0 .66.764h.053c.376.002.688-.288.715-.663l.715-10a.716.716 0 0 0-.664-.765"
                />
              </svg>
            </button>
            <button data-favorite-buy-btn class="favorite-product__btn favorite-product__cart" title="В кошик">
              <svg
                width="20"
                height="20"
                viewBox="0 0 35 29"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M26.1 19.9H7.9C5.3 19.9 3.7 18.1 3.3 16.3C3 15.2 0.7 7.1 0 4.9C-0.1 4.6 0.1 4.3 0.4 4.3H30V6.3H2.5C3.3 8.9 5 14.8 5.2 15.9C5.4 16.8 6.3 17.9 7.9 17.9H26.1V19.9Z"
                  fill="#FFA501"
                />
                <path
                  d="M24.6 24.8L23 23.7C23.2 23.4 23.4 23.1 23.5 22.7C24 21.2 27.5 8.8 29 3.5C29.5 1.4 31.3 0 33.5 0H34.7C34.8 0 35 0.2 35 0.3V1.6C35 1.8 34.8 2 34.7 2H33.5C32.3 2 31.2 2.8 30.9 4C29.4 9.3 25.9 21.8 25.4 23.4C25.2 23.9 24.9 24.4 24.6 24.8Z"
                  fill="#FFA501"
                />
                <path d="M20.5 25H8.4V27H20.5V25Z" fill="#FFA501" />
                <path
                  d="M6 29C4.3 29 3 27.6 3 26C3 24.3 4.4 23 6 23C7.7 23 9 24.4 9 26C9 27.6 7.7 29 6 29Z"
                  fill="#FFA501"
                />
                <path
                  d="M22.6 29C20.9 29 19.6 27.6 19.6 26C19.6 24.3 21 23 22.6 23C24.3 23 25.6 24.4 25.6 26C25.6 27.6 24.3 29 22.6 29Z"
                  fill="#FFA501"
                />
              </svg>
            </button>
          </div>
        </article>
      </li>`}initEventListeners(){this.element.addEventListener("click",s=>{const e=s.target.closest("[data-product-id]");if(!e)return;const t=Number(e.dataset.productId);s.target.closest("[data-favorite-remove-btn]")&&(s.stopPropagation(),this.storage.remove(t)),s.target.closest("[data-favorite-buy-btn]")&&this.cartStorage&&(s.stopPropagation(),this.cartStorage.add(t))})}}v=new WeakSet,V=function(s){this.totalPriceElement&&(this.totalPriceElement.textContent=`${this.formatter.format(s)} грн`)};class S{constructor(s,e,t){this.counter=document.querySelector(s),this.storage=e,this.eventName=t,!(!this.counter||!this.storage)&&this.init()}init(){this.update(),document.addEventListener(this.eventName,()=>{this.update()})}update(){const e=this.storage.get().length;this.counter.textContent=e,e>0?this.counter.classList.remove("is-hidden"):this.counter.classList.add("is-hidden")}}var b,U;class rs{constructor(s,e){h(this,b);a(this,"settings",{minQuantity:1,maxQuantity:15});a(this,"selectors",{list:"[data-cart-list]",totalPrice:"[data-cart-total-price]"});this.storage=s,this.allProducts=e,this.element=document.querySelector(this.selectors.list),this.totalPriceElements=document.querySelectorAll(this.selectors.totalPrice),this.formatter=new Intl.NumberFormat("uk-UA"),this.element&&this.init()}init(){this.render(),this.initEventListeners(),document.addEventListener("cart:updated",()=>this.render())}getGroupedProducts(){const e=this.storage.get().reduce((t,i)=>(t[i]=(t[i]||0)+1,t),{});return Object.keys(e).map(t=>{const i=this.allProducts.find(r=>r.id===Number(t));return i?{...i,count:e[t],totalItemPrice:i.price*e[t]}:null}).filter(t=>t!==null)}render(){const s=this.getGroupedProducts();if(s.length===0){this.element.innerHTML='<li class="cart__empty">Ваш кошик порожній</li>',c(this,b,U).call(this,0);return}this.element.innerHTML=s.map(t=>this.template(t)).join("");const e=s.reduce((t,i)=>t+i.totalItemPrice,0);c(this,b,U).call(this,e)}template(s){const{id:e,image:t,model:i,price:r,category:n,count:g}=s,u=g<=this.settings.minQuantity,l=g>=this.settings.maxQuantity;return`
      <li class="cart__item cart-item" data-product-id="${e}">
        <a href="/card.html?id=${e}" class="cart-item__image">
          <img src="${t}" alt="${i}" />
        </a>
        <div class="cart-item__info">
          <h3 class="cart-item__name">${i}</h3>
          <p class="cart-item__category">${n||"Окуляри"}</p>
        </div>
        <div class="cart-item__actions">
          <div class="cart-item__quantity quantity">
            <button type="button" data-cart-minus 
                    class="quantity__button quantity__button--minus" 
                    ${u?"disabled":""}>-</button>
            <input type="number" class="quantity__input" value="${g}" readonly />
            <button type="button" data-cart-plus 
                    class="quantity__button quantity__button--plus" 
                    ${l?"disabled":""}>+</button>
          </div>
          <div class="cart-item__price-block">
            <span class="cart-item__price">${this.formatter.format(r*g)} грн</span>
          </div>
          <button type="button" data-cart-remove-btn class="cart-item__delete" aria-label="Видалити товар">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M15.8333 4.16666L4.16666 15.8333" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M4.16666 4.16666L15.8333 15.8333" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </button>
        </div>
      </li>`}initEventListeners(){this.element.addEventListener("click",s=>{const e=s.target.closest("[data-product-id]");if(!e)return;const t=Number(e.dataset.productId),i=this.storage.get().filter(r=>r===t).length;s.target.closest("[data-cart-plus]")&&i<this.settings.maxQuantity&&this.storage.add(t),s.target.closest("[data-cart-minus]")&&i>this.settings.minQuantity&&this.storage.removeOne(t),s.target.closest("[data-cart-remove-btn]")&&this.storage.remove(t)})}}b=new WeakSet,U=function(s){this.totalPriceElements.forEach(e=>{e.textContent=this.formatter.format(s)})};function as(){const o=new E("user_favorites","favorite:updated"),s=new E("user_cart","cart:updated"),e=new es("[data-products-catalog]",y);new ts(e,y),new is,new os(o,y,s),new rs(s,y),new S("[data-favorite-counter]",o,"favorite:updated"),new S("[data-cart-counter]",s,"cart:updated")}window.addEventListener("DOMContentLoaded",()=>{I(),Y(),new D,new R,new X,K(),as()});
