var H=Object.defineProperty;var P=o=>{throw TypeError(o)};var R=(o,t,e)=>t in o?H(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var a=(o,t,e)=>R(o,typeof t!="symbol"?t+"":t,e),D=(o,t,e)=>t.has(o)||P("Cannot "+e);var y=(o,t,e)=>t.has(o)?P("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(o):t.set(o,e);var g=(o,t,e)=>(D(o,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();if(typeof window<"u"){let o=function(){var t=document.body,e=document.getElementById("__svg__icons__dom__");e||(e=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.style.position="absolute",e.style.width="0",e.style.height="0",e.id="__svg__icons__dom__",e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("xmlns:link","http://www.w3.org/1999/xlink")),e.innerHTML='<symbol fill="none" viewBox="0 0 32 32" id="icon-colored-instagram"><rect width="28" height="28" x="2" y="2" fill="url(#icon-colored-instagram_a1a)" rx="6" /><rect width="28" height="28" x="2" y="2" fill="url(#icon-colored-instagram_b1a)" rx="6" /><rect width="28" height="28" x="2" y="2" fill="url(#icon-colored-instagram_c1a)" rx="6" /><path fill="#fff" d="M23 10.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0" /><path fill="#fff" fill-rule="evenodd" d="M16 21a5 5 0 1 0 0-10 5 5 0 0 0 0 10m0-2a3 3 0 1 0 0-6 3 3 0 0 0 0 6" clip-rule="evenodd" /><path fill="#fff" fill-rule="evenodd" d="M6 15.6c0-3.36 0-5.04.654-6.324a6 6 0 0 1 2.622-2.622C10.56 6 12.24 6 15.6 6h.8c3.36 0 5.04 0 6.324.654a6 6 0 0 1 2.622 2.622C26 10.56 26 12.24 26 15.6v.8c0 3.36 0 5.04-.654 6.324a6 6 0 0 1-2.622 2.622C21.44 26 19.76 26 16.4 26h-.8c-3.36 0-5.04 0-6.324-.654a6 6 0 0 1-2.622-2.622C6 21.44 6 19.76 6 16.4zM15.6 8h.8c1.713 0 2.878.002 3.778.075.877.072 1.325.202 1.638.361a4 4 0 0 1 1.748 1.748c.16.313.29.761.36 1.638.074.9.076 2.065.076 3.778v.8c0 1.713-.002 2.878-.075 3.778-.072.877-.202 1.325-.361 1.638a4 4 0 0 1-1.748 1.748c-.313.16-.761.29-1.638.36-.9.074-2.065.076-3.778.076h-.8c-1.713 0-2.878-.002-3.778-.075-.877-.072-1.325-.202-1.638-.361a4 4 0 0 1-1.748-1.748c-.16-.313-.29-.761-.36-1.638C8.001 19.278 8 18.113 8 16.4v-.8c0-1.713.002-2.878.075-3.778.072-.877.202-1.325.361-1.638a4 4 0 0 1 1.748-1.748c.313-.16.761-.29 1.638-.36.9-.074 2.065-.076 3.778-.076" clip-rule="evenodd" /><defs><radialGradient id="icon-colored-instagram_a1a" cx="0" cy="0" r="1" gradientTransform="rotate(-55.376 27.916 .066)scale(25.5196)" gradientUnits="userSpaceOnUse"><stop offset="0%" stop-color="#b13589" /><stop offset="79.3%" stop-color="#c62f94" /><stop offset="100%" stop-color="#8a3ac8" /></radialGradient><radialGradient id="icon-colored-instagram_b1a" cx="0" cy="0" r="1" gradientTransform="rotate(-65.136 29.766 6.89)scale(22.5942)" gradientUnits="userSpaceOnUse"><stop offset="0%" stop-color="#e0e8b7" /><stop offset="44.5%" stop-color="#fb8a2e" /><stop offset="71.5%" stop-color="#e2425c" /><stop offset="100%" stop-color="#e2425c" stop-opacity="0" /></radialGradient><radialGradient id="icon-colored-instagram_c1a" cx="0" cy="0" r="1" gradientTransform="matrix(38.50003 -5.5 1.1764 8.23476 .5 3)" gradientUnits="userSpaceOnUse"><stop offset="15.7%" stop-color="#406adc" /><stop offset="46.8%" stop-color="#6a45be" /><stop offset="100%" stop-color="#6a45be" stop-opacity="0" /></radialGradient></defs></symbol><symbol viewBox="0 0 512 512" id="icon-colored-telegram"><rect width="512" height="512" rx="15%" fill="#37aee2" /><path fill="#c8daea" d="M199 404c-11 0-10-4-13-14l-32-105 245-144" /><path fill="#a9c9dd" d="M199 404c7 0 11-4 16-8l45-43-56-34" /><path fill="#f6fbfe" d="M204 319l135 99c14 9 26 4 30-14l55-258c5-22-9-32-24-25L79 245c-21 8-21 21-4 26l83 26 190-121c9-5 17-3 11 4" /></symbol><symbol viewBox="0 0 448 512" id="icon-colored-whatsapp"><path fill="#25D366" d="M448 80v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h352c26.5 0 48 21.5 48 48z" /><path fill="#FFF" d="M224 122.1c-67.9 0-123.1 55.2-123.1 123.1 0 22.6 6.1 44.6 17.7 64l-18.8 68.7 70.3-18.4c19.1 10.4 40.6 15.9 62.6 15.9 67.9 0 123.1-55.2 123.1-123.1 0-67.9-55.2-123.2-123.1-123.2zm60.3 173.4c-2.6 7.3-15.1 13.3-20.7 14.1-4.8.6-11.1 1.1-32.3-7.3-27-10.7-44.4-38.3-45.7-40.1-1.3-1.8-10.9-14.5-10.9-27.7s6.9-20.4 9.4-23c2.5-2.6 5.4-3.2 7.2-3.2 1.8 0 3.7 0 5.3.1 1.6.1 3.7-.6 5.8 4.5 2.1 5.1 7.3 17.7 7.9 19.1.6 1.3 1 2.9.1 4.7-1 1.8-1.5 2.9-2.9 4.7-1.4 1.8-2.9 4-4.2 5.3-1.4 1.4-3 3-1.3 6 1.7 3 7.6 12.5 16.2 20.2 11.1 9.9 20.5 13 23.5 14.5 3 1.5 4.7 1.3 6.5-.7 1.8-1.9 7.6-8.8 9.7-11.8 2-3 4-2.5 6.8-1.5 2.7 1 17.4 8.2 20.4 9.7 3 1.5 5 2.2 5.7 3.4.7 1.2.7 6.8-1.9 14.1z" /></symbol><symbol viewBox="0 0 35 29" id="icon-monochrome-cart"><path d="M26.1 19.9H7.9C5.3 19.9 3.7 18.1 3.3 16.3C3 15.2 0.7 7.1 0 4.9C-0.1 4.6 0.1 4.3 0.4 4.3H30V6.3H2.5C3.3 8.9 5 14.8 5.2 15.9C5.4 16.8 6.3 17.9 7.9 17.9H26.1V19.9Z" fill="#FFA501" /><path d="M24.6 24.8L23 23.7C23.2 23.4 23.4 23.1 23.5 22.7C24 21.2 27.5 8.8 29 3.5C29.5 1.4 31.3 0 33.5 0H34.7C34.8 0 35 0.2 35 0.3V1.6C35 1.8 34.8 2 34.7 2H33.5C32.3 2 31.2 2.8 30.9 4C29.4 9.3 25.9 21.8 25.4 23.4C25.2 23.9 24.9 24.4 24.6 24.8Z" fill="#FFA501" /><path d="M20.5 25H8.4V27H20.5V25Z" fill="#FFA501" /><path d="M6 29C4.3 29 3 27.6 3 26C3 24.3 4.4 23 6 23C7.7 23 9 24.4 9 26C9 27.6 7.7 29 6 29Z" fill="#FFA501" /><path d="M22.6 29C20.9 29 19.6 27.6 19.6 26C19.6 24.3 21 23 22.6 23C24.3 23 25.6 24.4 25.6 26C25.6 27.6 24.3 29 22.6 29Z" fill="#FFA501" /></symbol><symbol fill="none" viewBox="0 0 24 21" id="icon-monochrome-favorite-card"><path fill="#e89f71" fill-rule="evenodd" d="M12 18.023c-4.64-2.635-7.236-5.26-8.493-7.55C2.224 8.138 2.33 6.156 3.052 4.74c1.478-2.9 5.684-3.828 8.242-.593l.705.893.707-.893c2.558-3.235 6.764-2.307 8.242.593.721 1.415.827 3.398-.456 5.735-1.257 2.289-3.852 4.914-8.492 7.549zm0-15.778C8.52-1.144 3.337.215 1.448 3.922.42 5.939.4 8.555 1.93 11.34c1.517 2.763 4.548 5.69 9.634 8.502l.436.24.435-.24c5.086-2.811 8.118-5.74 9.635-8.502 1.53-2.785 1.51-5.4.482-7.418C20.662.215 15.48-1.144 12 2.245" clip-rule="evenodd" /></symbol><symbol viewBox="0 0 32 29" id="icon-monochrome-favorite"><path fill="#ffa501" d="M16 29c-.5 0-1-.2-1.4-.5C11.2 25.5 0 15.2 0 8.9 0 4 3.9 0 8.6 0c3.1 0 5.9 1.7 7.4 4.3C17.5 1.7 20.3 0 23.4 0 28.1 0 32 4 32 8.9c0 6.3-11.2 16.6-14.6 19.6-.4.3-.9.5-1.4.5M8.6 2C5 2 2 5.1 2 8.9 2 13.3 9.5 21.4 15.9 27h.1c6.5-5.6 14-13.7 14-18.1C30 5.1 27 2 23.4 2c-2.7 0-5.1 1.7-6.1 4.3-.2.3-.5.7-1.3.7-.7 0-1.1-.2-1.3-.7-1-2.6-3.4-4.3-6.1-4.3" /></symbol><symbol fill="none" viewBox="0 0 16 16" id="icon-monochrome-phone"><path d="M11.43 11.067l-.515.773c-.103.154-.239.286-.418.334-.588.155-2.147.225-4.521-2.15C3.6 7.65 3.67 6.09 3.826 5.503c.048-.18.18-.315.334-.418l.773-.516a1.253 1.253 0 00.348-1.737L3.82.642A1.253 1.253 0 002.283.184l-.659.282c-.5.215-.908.6-1.152 1.086-.203.407-.36.836-.382 1.29-.068 1.432.246 4.96 4.176 8.89 3.93 3.93 7.458 4.243 8.89 4.176.454-.021.883-.179 1.29-.382a2.302 2.302 0 001.086-1.152l.282-.66c.238-.554.046-1.2-.456-1.535l-2.191-1.46a1.253 1.253 0 00-1.737.347z" fill="#898989" /></symbol><symbol fill="none" viewBox="0 0 20 20" id="icon-monochrome-trash"><path fill="#ffa501" d="M18.572 2.857h-5v-.714C13.572.959 12.612 0 11.429 0H8.572C7.388 0 6.429.96 6.429 2.143v.714h-5a.714.714 0 1 0 0 1.429h.776L3.572 19.35c.033.369.343.65.714.649h11.428c.37.002.681-.28.715-.65l1.366-15.064h.776a.714.714 0 1 0 0-1.429M7.857 2.143c0-.395.32-.714.715-.714h2.857c.394 0 .714.32.714.714v.714H7.857zm7.205 16.428H4.938L3.643 4.286H16.36z" /><path fill="#ffa501" d="M7.857 16.381v-.003l-.714-10a.716.716 0 0 0-1.429.101l.715 10a.714.714 0 0 0 .714.664h.051a.714.714 0 0 0 .663-.762M10 5.714a.714.714 0 0 0-.714.715v10a.714.714 0 1 0 1.428 0v-10A.714.714 0 0 0 10 5.714M13.622 5.714a.716.716 0 0 0-.765.664l-.714 10a.714.714 0 0 0 .66.764h.053c.376.002.688-.288.715-.663l.715-10a.716.716 0 0 0-.664-.765" /></symbol>',t.insertBefore(e,t.lastChild)};var ht=o;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",o):o()}function W(){const o=document.querySelectorAll("[data-goto]");o.length>0&&o.forEach(t=>{t.addEventListener("click",e=>{var i;const s=e.target.closest("[data-goto]");if(s.dataset.goto&&document.querySelector(s.dataset.goto)){e.preventDefault();const c=document.querySelector(s.dataset.goto).getBoundingClientRect().top+window.pageYOffset-(((i=document.querySelector("header"))==null?void 0:i.offsetHeight)||0);window.scrollTo({top:c,behavior:"smooth"})}})})}function z(){window.addEventListener("scroll",function(){scrollY>0?document.querySelector(".header").classList.add("scroll"):document.querySelector(".header").classList.remove("scroll")})}class Y{constructor(){a(this,"selectors",{root:"[data-header]",menu:"[data-header-menu]",burgerButton:"[data-header-burger-btn]",overlay:".header__overlay"});a(this,"stateClasses",{isActive:"is-active",isLock:"lock"});a(this,"setHeightProperty",()=>{const t=this.rootElement.offsetHeight;document.documentElement.style.setProperty("--header-height",`${t}px`)});a(this,"toggleMenu",()=>{this.menuElement.classList.contains(this.stateClasses.isActive)?this.closeMenu():this.openMenu()});a(this,"onEscapePress",t=>{t.key==="Escape"&&this.closeMenu()});a(this,"onOverlayClick",t=>{t.target===this.overlayElement&&this.closeMenu()});a(this,"onMenuClick",t=>{const e=t.target;(e.closest("a")||e.closest("button"))&&this.closeMenu()});this.rootElement=document.querySelector(this.selectors.root),this.rootElement&&(this.menuElement=this.rootElement.querySelector(this.selectors.menu),this.burgerButtonElement=this.rootElement.querySelector(this.selectors.burgerButton),this.overlayElement=this.rootElement.querySelector(this.selectors.overlay),this.bindEvents(),this.setHeightProperty())}updateAccessibility(t){this.burgerButtonElement.setAttribute("aria-expanded",t),document.body.classList.toggle(this.stateClasses.isLock,t)}openMenu(){this.burgerButtonElement.classList.add(this.stateClasses.isActive),this.menuElement.classList.add(this.stateClasses.isActive),this.updateAccessibility(!0),document.addEventListener("keydown",this.onEscapePress)}closeMenu(){this.burgerButtonElement.classList.remove(this.stateClasses.isActive),this.menuElement.classList.remove(this.stateClasses.isActive),this.updateAccessibility(!1),document.removeEventListener("keydown",this.onEscapePress)}bindEvents(){!this.burgerButtonElement||!this.menuElement||(this.burgerButtonElement.addEventListener("click",this.toggleMenu),this.menuElement.addEventListener("click",this.onMenuClick),window.addEventListener("resize",this.setHeightProperty),this.overlayElement&&this.overlayElement.addEventListener("click",this.onOverlayClick))}destroy(){this.burgerButtonElement.removeEventListener("click",this.toggleMenu),this.menuElement.removeEventListener("click",this.onMenuClick),document.removeEventListener("keydown",this.onEscapePress),window.removeEventListener("resize",this.setHeightProperty)}}class G{constructor(t={}){a(this,"defaults",{parent:document.body,offset:300,maxWidth:2e3,scrollUpClass:"scroll-up",scrollUpPathClass:"scroll-up__path"});a(this,"toggleVisibility",()=>{const{offset:t,maxWidth:e,scrollUpClass:s}=this.settings,i=this.getScrollTop(),r=window.innerWidth;this.updateDashOffset(),i>t&&r<=e?this.button.classList.add(`${s}--active`):this.button.classList.remove(`${s}--active`)});a(this,"scrollToTop",()=>{window.scrollTo({top:0,behavior:"smooth"})});this.settings={...this.defaults,...t};const{parent:e}=this.settings;if(!(e instanceof Element)){console.error("ScrollUpButton = Invalid parent element");return}this.parent=e,this.button=null,this.path=null,this.pathLength=0,this.init()}init(){this.createButton(),this.cacheElements(),this.setInitialStyles(),this.bindEvents(),this.toggleVisibility()}createButton(){const{scrollUpClass:t,scrollUpPathClass:e,parent:s}=this.settings;this.button=document.createElement("button"),this.button.classList.add(t),this.button.setAttribute("aria-label","scroll to top"),this.button.setAttribute("title","scroll to top"),this.button.innerHTML=`
      <svg class="${t}__svg" xmlns="http://www.w3.org/2000/svg" viewBox="-2 -2 52 52">
        <path class="${e}" d="M 24,0 a24,24 0 0,1 0,48 a24,24 0 0,1 0,-48" />
      </svg>
    `,s.appendChild(this.button)}cacheElements(){const{scrollUpPathClass:t}=this.settings;this.path=this.button.querySelector(`.${t}`),this.pathLength=this.path.getTotalLength()}setInitialStyles(){this.path.style.strokeDasharray=`${this.pathLength} ${this.pathLength}`,this.path.style.transition="stroke-dashoffset 0.3s ease"}getScrollTop(){return window.scrollY||document.documentElement.scrollTop}updateDashOffset(){const t=document.documentElement.scrollHeight-window.innerHeight,e=this.pathLength-this.getScrollTop()*this.pathLength/t;this.path.style.strokeDashoffset=e}bindEvents(){window.addEventListener("scroll",this.toggleVisibility),window.addEventListener("resize",this.toggleVisibility),this.button.addEventListener("click",this.scrollToTop)}destroy(){window.removeEventListener("scroll",this.toggleVisibility),window.removeEventListener("resize",this.toggleVisibility),this.button.removeEventListener("click",this.scrollToTop),this.button.remove()}}function K(){const o=document.querySelectorAll(".scroller");window.matchMedia("(prefer-reduce-motion: reduce)").matches||t();function t(){o.forEach(e=>{e.setAttribute("data-animated",!0);const s=e.querySelector(".scroller__inner");Array.from(s.children).forEach(r=>{const c=r.cloneNode(!0);c.setAttribute("aria-hidden",!0),s.appendChild(c)})})}}let w=!0;const A=o=>{w=!1,setTimeout(()=>{w=!0},o)},j=()=>document.querySelectorAll("[data-right-padding]"),Q=()=>(window.innerWidth-document.body.clientWidth)/16+"rem",k=(o="")=>{j().forEach(e=>{e.style.paddingRight=o}),document.body.style.paddingRight=o},Z=o=>{document.documentElement.style.setProperty("--scrollbar-width",o)},J=()=>{document.documentElement.style.removeProperty("--scrollbar-width")},X=(o=500)=>{if(!w)return;const t=Q();k(t),Z(t),document.documentElement.setAttribute("data-scroll-lock",""),A(o)},tt=(o=500)=>{w&&(setTimeout(()=>{k(""),J(),document.documentElement.removeAttribute("data-scroll-lock")},o),A(o))};class et{constructor(t={}){a(this,"selectors",{youtubePlace:"[data-popup-youtube-place]"});const e={youtubeAttr:"data-popup-youtube",autoplayYoutube:!0};this.options={...e,...t}}extractCodeFromButton(t){return(t==null?void 0:t.getAttribute(this.options.youtubeAttr))||null}extractCodeFromPopup(t){return(t==null?void 0:t.getAttribute(this.options.youtubeAttr))||null}setup(t,e){if(!t||!e)return;let s=t.querySelector("iframe");if(!s){s=document.createElement("iframe"),s.allowFullscreen=!0,s.allow=this.options.autoplayYoutube?"autoplay; encrypted-media":"encrypted-media";const i=t.querySelector(this.selectors.youtubePlace);if(!i)return;i.appendChild(s)}s.style.display="",s.src=`https://www.youtube.com/embed/${e}?rel=0&showinfo=0${this.options.autoplayYoutube?"&autoplay=1":""}`}clear(t){if(!t)return;const e=t.querySelector("iframe");e&&(e.style.display="none",e.src="")}}class st{constructor(t={}){a(this,"selectors",{root:"[data-popup]",openButton:"[data-popup-link]",closeButton:"[data-popup-close]",content:"[data-popup-body]"});a(this,"stateAttrs",{popupActive:"data-popup-active",bodyActive:"data-popup-open"});a(this,"stateClasses",{isVisible:"is-visible"});const e={youtubeAttr:"data-popup-youtube",autoplayYoutube:!0,focusCatch:!0,closeEsc:!0,bodyLock:!0,hash:{use:!0,navigate:!0}};this.options={...e,...t,hash:{...e.hash,...t==null?void 0:t.hash}},this.youtube=new et({youtubeAttr:this.options.youtubeAttr,autoplayYoutube:this.options.autoplayYoutube}),this.isOpen=!1,this.activePopup=null,this.lastFocusEl=null,this.youTubeCode=null,this._focusable=["a[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"button:not([disabled]):not([aria-hidden])","select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])",'[tabindex]:not([tabindex^="-"])'],this.bindEvents(),this.options.hash.navigate&&window.location.hash&&this.openFromHash()}bindEvents(){document.addEventListener("click",this.handleClick.bind(this)),document.addEventListener("keydown",this.handleKey.bind(this)),this.options.hash.navigate&&window.addEventListener("hashchange",this.handleHashChange.bind(this))}handleClick(t){const e=t.target.closest(this.selectors.openButton),s=t.target.closest(this.selectors.closeButton);if(e){t.preventDefault(),this.youTubeCode=this.youtube.extractCodeFromButton(e),this.lastFocusEl=e;const i=e.getAttribute("data-popup-link");this.open(i);return}(s||this.isOpen&&!t.target.closest(this.selectors.content))&&(t.preventDefault(),this.close())}handleKey(t){this.isOpen&&(this.options.closeEsc&&t.key==="Escape"?(t.preventDefault(),this.close()):this.options.focusCatch&&t.key==="Tab"&&this.focusCatch(t))}handleHashChange(){window.location.hash?this.openFromHash():this.close()}open(t){if(!w)return;const e=document.querySelector(`[data-popup="${t}"]`)??document.querySelector(this.selectors.root);if(!e)return;this.activePopup&&this.activePopup!==e&&this.close(this.activePopup),this.activePopup=e,this.isOpen=!0;const s=this.youTubeCode||this.youtube.extractCodeFromPopup(e);s&&this.youtube.setup(e,s),this.options.hash.use&&this.updateHash(t),e.setAttribute(this.stateAttrs.popupActive,""),e.classList.add(this.stateClasses.isVisible),e.setAttribute("aria-hidden","false"),document.documentElement.setAttribute(this.stateAttrs.bodyActive,""),this.options.bodyLock&&X(),setTimeout(()=>this.focusTrap(),50)}close(t=this.activePopup){var e;!t||!this.isOpen||(t.removeAttribute(this.stateAttrs.popupActive),t.classList.remove(this.stateClasses.isVisible),t.setAttribute("aria-hidden","true"),this.isOpen=!1,this.activePopup=null,this.youtube.clear(t),document.documentElement.removeAttribute(this.stateAttrs.bodyActive),this.options.bodyLock&&tt(),this.options.hash.use&&this.clearHash(),(e=this.lastFocusEl)==null||e.focus())}focusCatch(t){var r;const e=(r=this.activePopup)==null?void 0:r.querySelectorAll(this._focusable);if(!(e!=null&&e.length))return;const s=Array.from(e),i=s.indexOf(document.activeElement);t.shiftKey&&i===0?(s.at(-1).focus(),t.preventDefault()):!t.shiftKey&&i===s.length-1&&(s[0].focus(),t.preventDefault())}focusTrap(){var e,s;const t=(e=this.activePopup)==null?void 0:e.querySelectorAll(this._focusable);t!=null&&t.length&&((s=this.isOpen?t[0]:this.lastFocusEl)==null||s.focus())}updateHash(t){history.replaceState(null,"",`#${t}`)}clearHash(){history.replaceState(null,"",window.location.pathname)}openFromHash(){const t=window.location.hash.replace("#","");if(!t)return;const e=document.querySelector(`[data-popup-link="${t}"]`);this.youTubeCode=this.youtube.extractCodeFromButton(e),this.open(t)}}const E=JSON.parse('[{"category":"glasses for vision","id":1,"image":"./img/products/glasses-for-vision/1.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-1","price":1200},{"category":"glasses for vision","id":2,"image":"./img/products/glasses-for-vision/2.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-2","price":1200},{"category":"glasses for vision","id":3,"image":"./img/products/glasses-for-vision/3.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-3","price":1200},{"category":"glasses for vision","id":4,"image":"./img/products/glasses-for-vision/4.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-4","price":1200},{"category":"glasses for vision","id":5,"image":"./img/products/glasses-for-vision/5.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-5","price":1200},{"category":"glasses for vision","id":6,"image":"./img/products/glasses-for-vision/6.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-6","price":1200},{"category":"glasses for vision","id":7,"image":"./img/products/glasses-for-vision/7.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-7","price":1200},{"category":"glasses for vision","id":8,"image":"./img/products/glasses-for-vision/8.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-8","price":1200},{"category":"glasses for vision","id":9,"image":"./img/products/glasses-for-vision/9.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-9","price":1200},{"category":"glasses for vision","id":10,"image":"./img/products/glasses-for-vision/10.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-10","price":1200},{"category":"glasses for vision","id":11,"image":"./img/products/glasses-for-vision/11.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-11","price":1200},{"category":"glasses for vision","id":12,"image":"./img/products/glasses-for-vision/12.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-12","price":1200},{"category":"glasses for vision","id":13,"image":"./img/products/glasses-for-vision/13.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-13","price":1200},{"category":"glasses for vision","id":14,"image":"./img/products/glasses-for-vision/14.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-14","price":1200},{"category":"glasses for vision","id":15,"image":"./img/products/glasses-for-vision/15.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-15","price":1200},{"category":"glasses for vision","id":16,"image":"./img/products/glasses-for-vision/16.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-16","price":1200},{"category":"glasses for vision","id":17,"image":"./img/products/glasses-for-vision/17.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-17","price":1200},{"category":"glasses for vision","id":18,"image":"./img/products/glasses-for-vision/18.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-18","price":1200},{"category":"glasses for vision","id":19,"image":"./img/products/glasses-for-vision/19.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-19","price":1200},{"category":"glasses for vision","id":20,"image":"./img/products/glasses-for-vision/20.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-20","price":1200},{"category":"glasses for vision","id":21,"image":"./img/products/glasses-for-vision/21.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-21","price":1200},{"category":"glasses for vision","id":22,"image":"./img/products/glasses-for-vision/22.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-22","price":1200},{"category":"glasses for vision","id":23,"image":"./img/products/glasses-for-vision/23.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-23","price":1200},{"category":"glasses for vision","id":24,"image":"./img/products/glasses-for-vision/24.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-24","price":1200},{"category":"glasses for vision","id":25,"image":"./img/products/glasses-for-vision/25.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-25","price":1200},{"category":"glasses for vision","id":26,"image":"./img/products/glasses-for-vision/26.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-26","price":1200},{"category":"glasses for vision","id":27,"image":"./img/products/glasses-for-vision/27.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-27","price":1200},{"category":"glasses for vision","id":28,"image":"./img/products/glasses-for-vision/28.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-28","price":1200},{"category":"glasses for vision","id":29,"image":"./img/products/glasses-for-vision/29.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-29","price":1200},{"category":"glasses for vision","id":30,"image":"./img/products/glasses-for-vision/30.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-30","price":1200},{"category":"glasses for vision","id":31,"image":"./img/products/glasses-for-vision/31.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-31","price":1200},{"category":"glasses for vision","id":32,"image":"./img/products/glasses-for-vision/32.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-32","price":1200},{"category":"glasses for vision","id":33,"image":"./img/products/glasses-for-vision/33.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-33","price":1200},{"category":"glasses for vision","id":34,"image":"./img/products/glasses-for-vision/34.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-34","price":1200},{"category":"glasses for vision","id":35,"image":"./img/products/glasses-for-vision/35.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-35","price":1200},{"category":"glasses for vision","id":36,"image":"./img/products/glasses-for-vision/36.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-36","price":1200},{"category":"glasses for vision","id":37,"image":"./img/products/glasses-for-vision/37.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-37","price":1200},{"category":"glasses for vision","id":38,"image":"./img/products/glasses-for-vision/38.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-38","price":1200},{"category":"glasses for vision","id":39,"image":"./img/products/glasses-for-vision/39.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-39","price":1200},{"category":"glasses for vision","id":40,"image":"./img/products/glasses-for-vision/40.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-40","price":1200},{"category":"glasses for vision","id":41,"image":"./img/products/glasses-for-vision/41.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-41","price":1200},{"category":"glasses for vision","id":42,"image":"./img/products/glasses-for-vision/42.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-42","price":1200},{"category":"glasses for vision","id":43,"image":"./img/products/glasses-for-vision/43.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-43","price":1200},{"category":"glasses for vision","id":44,"image":"./img/products/glasses-for-vision/44.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-44","price":1200},{"category":"glasses for vision","id":45,"image":"./img/products/glasses-for-vision/45.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-45","price":1200},{"category":"glasses for vision","id":46,"image":"./img/products/glasses-for-vision/46.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-46","price":1200},{"category":"glasses for vision","id":47,"image":"./img/products/glasses-for-vision/47.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-47","price":1200},{"category":"glasses for vision","id":48,"image":"./img/products/glasses-for-vision/48.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-48","price":1200},{"category":"glasses for vision","id":49,"image":"./img/products/glasses-for-vision/49.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-49","price":1200},{"category":"glasses for vision","id":50,"image":"./img/products/glasses-for-vision/50.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-50","price":1200},{"category":"glasses for vision","id":51,"image":"./img/products/glasses-for-vision/51.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-51","price":1200},{"category":"glasses for vision","id":52,"image":"./img/products/glasses-for-vision/52.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-52","price":1200},{"category":"glasses for vision","id":53,"image":"./img/products/glasses-for-vision/53.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-53","price":1200},{"category":"glasses for vision","id":54,"image":"./img/products/glasses-for-vision/54.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-54","price":1200},{"category":"glasses for vision","id":55,"image":"./img/products/glasses-for-vision/55.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-55","price":1200},{"category":"glasses for vision","id":56,"image":"./img/products/glasses-for-vision/56.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-56","price":1200},{"category":"glasses for vision","id":57,"image":"./img/products/glasses-for-vision/57.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-57","price":1200},{"category":"glasses for vision","id":58,"image":"./img/products/glasses-for-vision/58.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-58","price":1200},{"category":"glasses for vision","id":59,"image":"./img/products/glasses-for-vision/59.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-59","price":1200},{"category":"glasses for vision","id":60,"image":"./img/products/glasses-for-vision/60.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-60","price":1200},{"category":"glasses for vision","id":61,"image":"./img/products/glasses-for-vision/61.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-61","price":1200},{"category":"glasses for vision","id":62,"image":"./img/products/glasses-for-vision/62.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-62","price":1200},{"category":"glasses for vision","id":63,"image":"./img/products/glasses-for-vision/63.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-63","price":1200},{"category":"glasses for vision","id":64,"image":"./img/products/glasses-for-vision/64.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-64","price":1200},{"category":"glasses for vision","id":65,"image":"./img/products/glasses-for-vision/65.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-65","price":1200},{"category":"glasses for vision","id":66,"image":"./img/products/glasses-for-vision/66.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-66","price":1200},{"category":"glasses for vision","id":67,"image":"./img/products/glasses-for-vision/67.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-67","price":1200},{"category":"glasses for vision","id":68,"image":"./img/products/glasses-for-vision/68.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-68","price":1200},{"category":"glasses for vision","id":69,"image":"./img/products/glasses-for-vision/69.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-69","price":1200},{"category":"glasses for vision","id":70,"image":"./img/products/glasses-for-vision/70.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-70","price":1200},{"category":"glasses for vision","id":71,"image":"./img/products/glasses-for-vision/71.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-71","price":1200},{"category":"glasses for vision","id":72,"image":"./img/products/glasses-for-vision/72.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-72","price":1200},{"category":"glasses for vision","id":73,"image":"./img/products/glasses-for-vision/73.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-73","price":1200},{"category":"glasses for vision","id":74,"image":"./img/products/glasses-for-vision/74.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-74","price":1200},{"category":"glasses for vision","id":75,"image":"./img/products/glasses-for-vision/75.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-75","price":1200},{"category":"glasses for vision","id":76,"image":"./img/products/glasses-for-vision/76.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-76","price":1200},{"category":"glasses for vision","id":77,"image":"./img/products/glasses-for-vision/77.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-77","price":1200},{"category":"glasses for vision","id":78,"image":"./img/products/glasses-for-vision/78.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-78","price":1200},{"category":"glasses for vision","id":79,"image":"./img/products/glasses-for-vision/79.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-79","price":1200},{"category":"glasses for vision","id":80,"image":"./img/products/glasses-for-vision/80.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-80","price":1200},{"category":"glasses for vision","id":81,"image":"./img/products/glasses-for-vision/81.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-81","price":1200},{"category":"glasses for vision","id":82,"image":"./img/products/glasses-for-vision/82.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-82","price":1200},{"category":"glasses for vision","id":83,"image":"./img/products/glasses-for-vision/83.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-83","price":1200},{"category":"glasses for vision","id":84,"image":"./img/products/glasses-for-vision/84.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-84","price":1200},{"category":"glasses for vision","id":85,"image":"./img/products/glasses-for-vision/85.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-85","price":1200},{"category":"glasses for vision","id":86,"image":"./img/products/glasses-for-vision/86.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-86","price":1200},{"category":"glasses for vision","id":87,"image":"./img/products/glasses-for-vision/87.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-87","price":1200},{"category":"glasses for vision","id":88,"image":"./img/products/glasses-for-vision/88.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-88","price":1200},{"category":"glasses for vision","id":89,"image":"./img/products/glasses-for-vision/89.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-89","price":1200},{"category":"glasses for vision","id":90,"image":"./img/products/glasses-for-vision/90.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-90","price":1200},{"category":"glasses for vision","id":91,"image":"./img/products/glasses-for-vision/91.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-91","price":1200},{"category":"glasses for vision","id":92,"image":"./img/products/glasses-for-vision/92.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-92","price":1200},{"category":"glasses for vision","id":93,"image":"./img/products/glasses-for-vision/93.webp","description":"description model glasses for vision","model":"glasses for vision with UV protection 1","article":"01-93","price":1200}]');var v,S,x,T;class it{constructor(t={},e={},s={}){y(this,v);a(this,"defaultSettings",{rootAttribute:"data-product",rootClass:"products__item",imageWrapperClass:"product__image ibg",bottomWrapperClass:"product__bottom"});a(this,"defaultAttributes",{buyBtn:"data-card-buy-btn",favoriteBtn:"data-card-favorite",price:"data-card-price",productId:"data-product-id"});a(this,"defaultClasses",{productCard:"product",favoriteLink:"product__link product__link-favorite",title:"product__title",descr:"product__descr",article:"product__article",priceWrapper:"product__price product-price",priceCurrent:"product__price-current",buyBtn:"button button--card product__btn",active:"is-active",inCart:"is-in-cart"});a(this,"defaultI18n",{buy:"Купити",inCart:"В кошику",currency:"грн",articlePrefix:"Артикул:",titleFavorite:"Додати до обраного",titleFavoriteRemove:"Видалити з обраного",ariaBuy:"Додати у кошик товар",ariaInCart:"Товар уже у кошику",ariaProductLink:"Перейти до опису моделі",iconFavorite:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="21" fill="none" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M12 18.023c-4.64-2.635-7.236-5.26-8.493-7.55C2.224 8.138 2.33 6.156 3.052 4.74c1.478-2.9 5.684-3.828 8.242-.593l.705.893.707-.893c2.558-3.235 6.764-2.307 8.242.593.721 1.415.827 3.398-.456 5.735-1.257 2.289-3.852 4.914-8.492 7.549zm0-15.778C8.52-1.144 3.337.215 1.448 3.922.42 5.939.4 8.555 1.93 11.34c1.517 2.763 4.548 5.69 9.634 8.502l.436.24.435-.24c5.086-2.811 8.118-5.74 9.635-8.502 1.53-2.785 1.51-5.4.482-7.418C20.662.215 15.48-1.144 12 2.245" clip-rule="evenodd"/></svg>'});this.product=t,this.cartStorage=e.cart,this.favStorage=e.favorite,this.settings={...this.defaultSettings,...s.settings},this.attrs={...this.defaultAttributes,...s.attributes},this.classes={...this.defaultClasses,...s.classes},this.i18n={...this.defaultI18n,...s.i18n},this.formatter=s.formatter||new Intl.NumberFormat("uk-UA"),this.element=null,this.subElements={},this.onFavoriteUpdate=this.syncFavoriteState.bind(this),this.onCartUpdate=this.syncCartState.bind(this)}getTemplate(){var u,_;const{id:t,image:e,model:s,description:i,article:r,price:c}=this.product,{attrs:p,classes:l,i18n:n}=this,m=(u=this.favStorage)==null?void 0:u.check(t),d=(_=this.cartStorage)==null?void 0:_.check(t);return`
      <article class="${l.productCard}" ${p.productId}="${t}">
        <a href="/card.html?id=${t}" 
           target="_blank" 
           class="${this.settings.imageWrapperClass}" 
           aria-label="${n.ariaProductLink}: ${s}"
           title="${s}">
          <img src="${e}" alt="" width="285" height="215" loading="lazy" aria-hidden="true" />
        </a>
        <div class="${this.settings.bottomWrapperClass}">
          <div class="product__actions">
            <button type="button" 
                    ${p.favoriteBtn} 
                    class="${l.favoriteLink} ${m?l.active:""}" 
                    title="${m?n.titleFavoriteRemove:n.titleFavorite}" 
                    aria-label="${n.titleFavorite}: ${s}"
                    aria-pressed="${m}">
              ${n.iconFavorite}
            </button>
          </div>
          <a href="/card.html?id=${t}" target="_blank" class="${l.title}">${s}</a>
          <div class="${l.descr}"><p>${i}</p></div>
          <div class="${l.article}">${n.articlePrefix} ${r}</div>
          <div class="${l.priceWrapper}">
            <div ${p.price} class="${l.priceCurrent}">
              ${this.formatter.format(c)} ${n.currency}
            </div>
          </div>
          <button type="button" 
                  ${p.buyBtn} 
                  class="${l.buyBtn} ${d?l.inCart:""}" 
                  title="${d?n.ariaInCart:n.buy}"
                  aria-label="${d?n.ariaInCart:n.ariaBuy}: ${s}">
            ${d?n.inCart:n.buy}
          </button>
        </div>
      </article>
    `}render(){const t=document.createElement("div");return t.innerHTML=this.getTemplate(),this.element=document.createElement("li"),this.element.className=this.settings.rootClass,this.element.setAttribute(this.settings.rootAttribute,this.product.id),this.element.append(t.firstElementChild),g(this,v,S).call(this),g(this,v,x).call(this),this.element}syncFavoriteState(){if(!this.favStorage)return;const t=this.favStorage.check(this.product.id),e=this.subElements.favoriteBtn;e&&(e.classList.toggle(this.classes.active,t),e.setAttribute("aria-pressed",t),e.title=t?this.i18n.titleFavoriteRemove:this.i18n.titleFavorite)}syncCartState(){if(!this.cartStorage)return;const t=this.cartStorage.check(this.product.id);g(this,v,T).call(this,t)}destroy(){this.element&&(document.removeEventListener("favorite:updated",this.onFavoriteUpdate),document.removeEventListener("cart:updated",this.onCartUpdate),this.element.remove()),this.element=null,this.subElements={}}}v=new WeakSet,S=function(){const t=Object.values(this.attrs).map(s=>`[${s}]`).join(",");this.element.querySelectorAll(t).forEach(s=>{const i=Object.keys(this.attrs).find(r=>s.hasAttribute(this.attrs[r]));i&&(this.subElements[i]=s)})},x=function(){var t,e;(t=this.subElements.favoriteBtn)==null||t.addEventListener("click",s=>{var i;s.preventDefault(),(i=this.favStorage)==null||i.toggle(this.product.id)}),(e=this.subElements.buyBtn)==null||e.addEventListener("click",s=>{var i,r;s.preventDefault(),(i=this.cartStorage)!=null&&i.check(this.product.id)||(r=this.cartStorage)==null||r.add(this.product.id)}),document.addEventListener("favorite:updated",this.onFavoriteUpdate),document.addEventListener("cart:updated",this.onCartUpdate)},T=function(t){const e=this.subElements.buyBtn;e&&(e.textContent=t?this.i18n.inCart:this.i18n.buy,e.classList.toggle(this.classes.inCart,t),e.title=t?this.i18n.ariaInCart:this.i18n.buy,e.setAttribute("aria-label",`${t?this.i18n.ariaInCart:this.i18n.ariaBuy}: ${this.product.model}`))};class ot{constructor(t,e=[],s={},i={}){a(this,"defaultSettings",{emptyClass:"products__empty"});a(this,"defaultI18n",{emptyMessage:"Товари не знайдено"});this.container=document.querySelector(t),this.products=e,this.cards=[],this.storage=s,this.settings={...this.defaultSettings,...i.settings},this.i18n={...this.defaultI18n,...i.i18n}}render(t=this.products){if(!this.container){console.warn("Container for ProductList not found");return}if(this.clear(),t.length===0){this.container.innerHTML=`
        <li class="${this.settings.emptyClass}">${this.i18n.emptyMessage}</li>
      `;return}const e=document.createDocumentFragment();t.forEach(s=>{const i=new it(s,this.storage);this.cards.push(i),e.append(i.render())}),this.container.append(e)}updateProducts(t){this.products=t||[]}clear(){this.container&&(this.cards.forEach(t=>t.destroy()),this.container.innerHTML="",this.cards=[])}}var h,M,B,I,O,$,F;class rt{constructor(t,e=[],s={}){y(this,h);a(this,"defaultSelectors",{pagination:"[data-pagination]",paginationList:"[data-pagination-list]",btnPrev:"[data-pagination-btn-prev]",btnNext:"[data-pagination-btn-next]",pageItem:".pagination__item"});a(this,"defaultClasses",{active:"is-active",hidden:"is-hidden",item:"pagination__item",separator:"pagination__separator"});a(this,"defaultI18n",{prev:"Попередня сторінка",next:"Наступна сторінка",page:"Сторінка",current:"Поточна сторінка",paginationLabel:"Пагінація товарів"});a(this,"onPageClick",t=>{const e=t.target.closest(this.selectors.pageItem);!e||e.classList.contains(this.classes.active)||(this.state.currentPage=Number(e.dataset.page),this.render())});a(this,"onNextClick",()=>{this.state.currentPage<this.getPagesCount()&&(this.state.currentPage++,this.render())});a(this,"onPrevClick",()=>{this.state.currentPage>1&&(this.state.currentPage--,this.render())});this.renderList=t,this.products=e,this.selectors={...this.defaultSelectors,...s.selectors},this.classes={...this.defaultClasses,...s.classes},this.i18n={...this.defaultI18n,...s.i18n},this.state={currentPage:1,productsPerPage:s.productsPerPage||12,visibleRange:2},this.pagination=document.querySelector(this.selectors.pagination),this.paginationList=document.querySelector(this.selectors.paginationList),this.btnPrev=document.querySelector(this.selectors.btnPrev),this.btnNext=document.querySelector(this.selectors.btnNext),this.paginationList&&this.init()}init(){g(this,h,B).call(this),this.render(),this.bindEvents(),g(this,h,M).call(this)}getPagesCount(){return Math.ceil(this.products.length/this.state.productsPerPage)}render(){g(this,h,I).call(this),this.renderPagination(),g(this,h,F).call(this)}renderPagination(){var p,l;const t=this.getPagesCount();if(t<=1){(p=this.pagination)==null||p.classList.add(this.classes.hidden);return}this.paginationList.innerHTML="";const e=document.createDocumentFragment(),{currentPage:s,visibleRange:i}=this.state,r=s-i,c=s+i;for(let n=1;n<=t;n++){const m=n===1||n===t,d=n>=r&&n<=c;m||d?e.append(g(this,h,O).call(this,n)):n===r-1&&n>1?e.append(g(this,h,$).call(this)):n===c+1&&n<t&&e.append(g(this,h,$).call(this))}this.paginationList.append(e),(l=this.pagination)==null||l.classList.remove(this.classes.hidden)}bindEvents(){var t,e;this.paginationList.addEventListener("click",this.onPageClick),(t=this.btnNext)==null||t.addEventListener("click",this.onNextClick),(e=this.btnPrev)==null||e.addEventListener("click",this.onPrevClick),this.paginationList.addEventListener("keydown",s=>{s.key==="Enter"&&this.onPageClick(s)})}updateProducts(t){this.products=t||[],this.state.currentPage=1,this.render()}}h=new WeakSet,M=function(){var t,e;this.btnPrev&&this.btnPrev.setAttribute("aria-label",this.i18n.prev),this.btnNext&&this.btnNext.setAttribute("aria-label",this.i18n.next),(t=this.pagination)==null||t.setAttribute("role","navigation"),(e=this.pagination)==null||e.setAttribute("aria-label",this.i18n.paginationLabel)},B=function(){const t=()=>{const s=window.innerWidth;let i=2;s<370?i=0:s<768&&(i=1),this.state.visibleRange!==i&&(this.state.visibleRange=i,this.renderPagination())};t();let e;window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(t,200)})},I=function(){const{currentPage:t,productsPerPage:e}=this.state,s=(t-1)*e,i=this.products.slice(s,s+e);if(this.renderList.render(i),t>1){const c=this.renderList.container,p=((c==null?void 0:c.getBoundingClientRect().top)||0)+window.pageYOffset+-100;window.scrollTo({top:p,behavior:"smooth"})}},O=function(t){const e=t===this.state.currentPage,s=document.createElement("li");return s.className=this.classes.item,e&&s.classList.add(this.classes.active),s.dataset.page=t,s.textContent=t,s.setAttribute("role","button"),s.setAttribute("tabindex","0"),s.setAttribute("aria-label",`${e?this.i18n.current:this.i18n.page} ${t}`),e&&s.setAttribute("aria-current","page"),s},$=function(){const t=document.createElement("li");return t.className=this.classes.separator,t.textContent="...",t.setAttribute("aria-hidden","true"),t},F=function(){const t=this.getPagesCount(),{currentPage:e}=this.state;if(this.btnPrev){const s=e===1;this.btnPrev.disabled=s,this.btnPrev.setAttribute("aria-disabled",s)}if(this.btnNext){const s=e===t;this.btnNext.disabled=s,this.btnNext.setAttribute("aria-disabled",s)}};var f,C,b;class U{constructor(t,e,s=!0){y(this,f);this.STORAGE_KEY=t,this.EVENT_NAME=e,this.useNumbers=s,this.initTabSync()}initTabSync(){window.addEventListener("storage",t=>{t.key===this.STORAGE_KEY&&this.EVENT_NAME&&g(this,f,C).call(this)})}get(){try{const t=localStorage.getItem(this.STORAGE_KEY);return t?this.safeParse(t):[]}catch(t){return console.error("LocalStorage Get Error:",t),[]}}set(t=[]){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t)),g(this,f,C).call(this)}catch(e){console.error(`Storage Error: Cannot save ${this.STORAGE_KEY}`,e)}}check(t){const e=g(this,f,b).call(this,t);return this.get().includes(e)}add(t){const e=this.get();e.push(g(this,f,b).call(this,t)),this.set(e)}removeOne(t){const e=g(this,f,b).call(this,t),s=this.get(),i=s.indexOf(e);i!==-1&&(s.splice(i,1),this.set(s))}remove(t){const e=g(this,f,b).call(this,t),s=this.get().filter(i=>i!==e);this.set(s)}toggle(t){const e=g(this,f,b).call(this,t),s=this.get(),i=s.indexOf(e);return i===-1?s.push(e):s.splice(i,1),this.set(s),s}clear(){localStorage.removeItem(this.STORAGE_KEY),g(this,f,C).call(this)}safeParse(t){try{const e=JSON.parse(t);return Array.isArray(e)?e:[]}catch{return[]}}}f=new WeakSet,C=function(){this.EVENT_NAME&&document.dispatchEvent(new CustomEvent(this.EVENT_NAME))},b=function(t){return this.useNumbers?Number(t):t};class at{constructor(){a(this,"selectors",{root:"[data-favorite]",button:"[data-favorite-btn]",content:".favorite__content"});a(this,"stateClasses",{active:"is-active"});a(this,"handleToggle",t=>{t.preventDefault(),this.isOpen?this.close():this.open()});a(this,"handleClickOutside",t=>{this.root.contains(t.target)||this.close()});a(this,"handleEscClose",t=>{t.key==="Escape"&&this.close()});this.root=document.querySelector(this.selectors.root),this.root&&(this.button=this.root.querySelector(this.selectors.button),this.content=this.root.querySelector(this.selectors.content),this.init())}init(){this.button.addEventListener("click",this.handleToggle)}get isOpen(){return this.root.classList.contains(this.stateClasses.active)}open(){this.root.classList.add(this.stateClasses.active),this.button.setAttribute("aria-expanded","true"),document.addEventListener("click",this.handleClickOutside),document.addEventListener("keydown",this.handleEscClose),this.root.dispatchEvent(new CustomEvent("favorite:opened"))}close(){this.root.classList.remove(this.stateClasses.active),this.button.setAttribute("aria-expanded","false"),document.removeEventListener("click",this.handleClickOutside),document.removeEventListener("keydown",this.handleEscClose)}destroy(){this.close(),this.button.removeEventListener("click",this.handleToggle)}}var L,N;class q{constructor(t=[],e={}){y(this,L);a(this,"defaultOptions",{keys:{id:"id",price:"price"}});this.options={keys:{...this.defaultOptions.keys,...e.keys}},this.productsMap=g(this,L,N).call(this,t)}getGroupedProducts(t){const{price:e}=this.options.keys,s=t.reduce((i,r)=>(i[r]=(i[r]||0)+1,i),{});return Object.entries(s).map(([i,r])=>{const c=this.productsMap.get(Number(i));return c?{...c,count:r,totalItemPrice:c[e]*r}:null}).filter(Boolean)}calculateTotal(t){return t.reduce((e,s)=>e+s.totalItemPrice,0)}}L=new WeakSet,N=function(t){const{id:e}=this.options.keys;return new Map(t.map(s=>[s[e],s]))};class nt{constructor(t={},e=null){a(this,"defaultSelectors",{list:"[data-favorite-list]",totalPrice:".favorite__fullprice",productId:"data-product-id",btnRemove:"data-favorite-remove-btn",btnBuy:"data-favorite-buy-btn"});a(this,"defaultClasses",{item:"favorite__item",product:"favorite-product",emptyMessage:"favorite__empty"});a(this,"defaultI18n",{emptyList:"Ваш список порожній",currency:"грн",art:"Art:",titleRemove:"Видалити",titleBuy:"В кошик",ariaRemove:"Видалити товар зі списку обраного",ariaBuy:"Додати товар у кошик",ariaProductLink:"Перейти к товару",iconTrash:'<svg class="svg svg--20" aria-hidden="true"><use xlink:href="#icon-monochrome-trash"></use></svg>',iconCart:'<svg class="svg svg--20" aria-hidden="true"><use xlink:href="#icon-monochrome-cart"></use></svg>'});this.selectors={...this.defaultSelectors,...t.selectors},this.classes={...this.defaultClasses,...t.classes},this.i18n={...this.defaultI18n,...t.i18n},this.formatter=e||new Intl.NumberFormat("uk-UA"),this.container=document.querySelector(this.selectors.list),this.totalPriceElement=document.querySelector(this.selectors.totalPrice)}render(t,e){this.container&&(t.length===0?this.container.innerHTML=`<li class="${this.classes.emptyMessage}">${this.i18n.emptyList}</li>`:this.container.innerHTML=t.map(s=>this.getItemTemplate(s)).join(""),this.updateTotal(e))}updateTotal(t){this.totalPriceElement&&(this.totalPriceElement.textContent=`${this.formatter.format(t)} ${this.i18n.currency}`)}getItemTemplate(t){const{id:e,image:s,model:i,price:r,article:c}=t,p=this.selectors,l=this.classes,n=this.i18n;return`
      <li class="${l.item}">
        <article class="${l.product}" ${p.productId}="${e}">
          <a href="/card.html?id=${e}" 
             target="_blank" 
             class="${l.product}__image" 
             aria-label="${n.ariaProductLink} ${i}">
            <img src="${s}" alt="" width="80" height="80" loading="lazy" aria-hidden="true" />
          </a>
          <div class="${l.product}__wrapper">
            <a href="/card.html?id=${e}" 
               target="_blank" 
               class="${l.product}__title"
               aria-label="${i}">${i}</a>
            <div class="${l.product}__inner">
              <div class="${l.product}__article" aria-label="Артикул">${n.art} ${c}</div>
              <div class="${l.product}__price" aria-label="Ціна">${this.formatter.format(r)} ${n.currency}</div>
            </div>
          </div>
          <div class="${l.product}__buttons">
            <button type="button" 
                    ${p.btnRemove} 
                    class="${l.product}__btn" 
                    title="${n.titleRemove}" 
                    aria-label="${n.ariaRemove}: ${i}">
              ${n.iconTrash}
            </button>
            <button type="button" 
                    ${p.btnBuy} 
                    class="${l.product}__btn" 
                    title="${n.titleBuy}" 
                    aria-label="${n.ariaBuy}: ${i}">
              ${n.iconCart}
            </button>
          </div>
        </article>
      </li>`}}class ct{constructor(t,e,s){this.storage=t,this.cartStorage=s,this.service=new q(e),this.view=new nt,this.view.container&&this.init()}init(){this.refresh(),this.initEventListeners(),document.addEventListener("favorite:updated",()=>this.refresh())}refresh(){const t=this.storage.get(),e=this.service.getGroupedProducts(t),s=this.service.calculateTotal(e);this.view.render(e,s)}initEventListeners(){const{productId:t,btnRemove:e,btnBuy:s}=this.view.selectors;this.view.container.addEventListener("click",i=>{const r=i.target.closest(`[${t}]`);if(!r)return;const c=Number(r.getAttribute(t));i.target.closest(`[${e}]`)&&(i.stopPropagation(),this.storage.remove(c)),i.target.closest(`[${s}]`)&&this.cartStorage&&(i.stopPropagation(),this.cartStorage.add(c))})}}class V{constructor(t,e,s){this.counters=document.querySelectorAll(t),this.storage=e,this.eventName=s,!(this.counters.length===0||!this.storage)&&this.init()}init(){this.update(),document.addEventListener(this.eventName,()=>{this.update()})}update(){const e=this.storage.get().length;this.counters.forEach(s=>{s.textContent=e,e>0?s.classList.remove("is-hidden"):s.classList.add("is-hidden")})}}class lt{constructor(t={},e={},s=null){a(this,"defaultSelectors",{list:"[data-cart-list]",totalPrice:"[data-cart-total-price]",productId:"data-product-id",btnMinus:"data-cart-minus",btnPlus:"data-cart-plus",btnRemove:"data-cart-remove-btn"});a(this,"defaultClasses",{item:"cart-item",itemImage:"cart-item__image",itemImg:"cart-item__img",itemInfo:"cart-item__info",itemName:"cart-item__name",itemArticle:"cart-item__article",itemActions:"cart-item__actions",quantity:"cart-item__quantity",quantityBtn:"quantity__button",quantityInput:"quantity__input",priceBlock:"cart-item__price-block",price:"cart-item__price",deleteBtn:"cart-item__delete",emptyMessage:"cart__empty"});a(this,"defaultI18n",{emptyCart:"Ваш кошик порожній",currency:"грн",articleLabel:"Артикул:",deleteLabel:"Видалити товар",minusLabel:"Зменшити кількість",plusLabel:"Збільшити кількість",iconTrash:`
      <svg class="svg svg--20">
        <use xlink:href="#icon-monochrome-trash"></use>
      </svg>
    `});this.selectors={...this.defaultSelectors,...t.selectors},this.classes={...this.defaultClasses,...t.classes},this.i18n={...this.defaultI18n,...t.i18n},this.settings=e,this.formatter=s||new Intl.NumberFormat("uk-UA"),this.container=document.querySelector(this.selectors.list),this.totalPriceElements=document.querySelectorAll(this.selectors.totalPrice)}render(t,e){this.container&&(t.length===0?this.container.innerHTML=`
        <li class="${this.classes.emptyMessage}">${this.i18n.emptyCart}</li>
      `:this.container.innerHTML=t.map(s=>this.getItemTemplate(s)).join(""),this.updateTotalDisplay(e))}updateTotalDisplay(t){const e=this.formatter.format(t);this.totalPriceElements.forEach(s=>{s.innerHTML=`${e}&nbsp;${this.i18n.currency}`})}getItemTemplate(t){const{id:e,image:s,model:i,price:r,article:c,count:p}=t,l=p<=(this.settings.minQuantity||1),n=p>=(this.settings.maxQuantity||99),m=this.selectors,d=this.classes,u=this.i18n;return`
      <li class="${d.item}" ${m.productId}="${e}">
        <a href="/card.html?id=${e}" class="${d.itemImage}">
          <img
            class="${d.itemImg}"
            src="${s}"
            alt="${i}"
            width="160"
            height="110"
            loading="lazy"
          />
        </a>
        <div class="${d.itemInfo}">
          <h3 class="${d.itemName}">${i}</h3>
          <div class="${d.itemArticle}">${u.articleLabel} ${c}</div>
        </div>
        <div class="${d.itemActions}">
          <div class="${d.priceBlock}">
            <span class="${d.price}">${this.formatter.format(r*p)}&nbsp;${u.currency}</span>
          </div>
          <div class="${d.quantity} quantity">
            <button
              type="button"
              ${m.btnMinus}
              class="${d.quantityBtn}"
              ${l?"disabled":""}
              aria-label="${u.minusLabel}"
              title="${u.minusLabel}"
            >
              −
            </button>
            <input
              type="number"
              class="${d.quantityInput}"
              value="${p}"
              readonly
            />
            <button
              type="button"
              ${m.btnPlus}
              class="${d.quantityBtn}"
              ${n?"disabled":""}
              aria-label="${u.plusLabel}"
              title="${u.plusLabel}"
            >
              +
            </button>
          </div>
          <button
            type="button"
            ${m.btnRemove}
            class="${d.deleteBtn}"
            aria-label="${u.deleteLabel}"
            title="${u.deleteLabel}"
          >
            ${u.iconTrash}
          </button>
        </div>
      </li>`}}class dt{constructor(t,e){a(this,"settings",{minQuantity:1,maxQuantity:15});a(this,"selectors",{list:"[data-cart-list]",totalPrice:"[data-cart-total-price]"});this.storage=t,this.service=new q(e),this.view=new lt({selectors:this.selectors},this.settings,new Intl.NumberFormat("uk-UA")),this.view.container&&this.init()}init(){this.refresh(),this.initEventListeners(),document.addEventListener("cart:updated",()=>this.refresh())}refresh(){const t=this.storage.get(),e=this.service.getGroupedProducts(t),s=this.service.calculateTotal(e);this.view.render(e,s)}initEventListeners(){const{productId:t,btnPlus:e,btnMinus:s,btnRemove:i}=this.view.selectors;this.view.container.addEventListener("click",r=>{const c=r.target.closest(`[${t}]`);if(!c)return;const p=Number(c.getAttribute(t)),l=r.target.closest(`[${e}]`),n=r.target.closest(`[${s}]`),m=r.target.closest(`[${i}]`);if(!l&&!n&&!m)return;const d=this.storage.get().filter(u=>u===p).length;l&&d<this.settings.maxQuantity?this.storage.add(p):n&&d>this.settings.minQuantity?this.storage.removeOne(p):m&&this.storage.remove(p)})}}function pt(){const o=new U("user_favorites","favorite:updated"),t=new U("user_cart","cart:updated"),e=new ot("[data-products-catalog]",E,{favorite:o,cart:t});new rt(e,E,{productsPerPage:12,visibleRange:2}),new at,new ct(o,E,t),new dt(t,E),new V("[data-favorite-counter]",o,"favorite:updated"),new V("[data-cart-counter]",t,"cart:updated")}window.addEventListener("DOMContentLoaded",()=>{W(),z(),new Y,new G,new st,K(),pt()});
